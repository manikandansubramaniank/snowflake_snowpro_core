# External functions                                                                                                                                                                                                   
What is the purpose of an External Function?                                                                                                                                                                           
                                                                                                                                                                                                                       
A. To call code that executes outside of Snowflake<br>B. To run a function in another Snowflake database<br>C. To share data in Snowflake with external parties<br>D. To ingest data from on-premises data sources     
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>A</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
The correct answer is A, "To call code that executes outside of Snowflake."                                                                                                                                            
External functions in Snowflake allow you to extend Snowflake's capabilities by invoking code that runs                                                                                                                
outside of the Snowflake environment. This is crucial because Snowflake's built-in SQL functions might not                                                                                                             
cover every possible use case or processing requirement. External functions bridge this gap by enabling                                                                                                                
integration with external services and custom code deployed on platforms like AWS Lambda, Google Cloud                                                                                                                 
Functions, or Microsoft Azure Functions.                                                                                                                                                                               
The primary purpose of an external function is to offload specific tasks, such as complex calculations, data                                                                                                           
transformations, or integrations with third-party APIs, to these external compute resources. This allows                                                                                                               
Snowflake to leverage the specialized capabilities and scalability of these external services without directly                                                                                                         
impacting the performance of the Snowflake data warehouse. By delegating these tasks, Snowflake can                                                                                                                    
focus on its core competency of data storage and analysis while seamlessly integrating with other cloudservices for a comprehensive solution. The data passed to external functions is typically encrypted for         
security.                                                                                                                                                                                                              
Option B is incorrect because while Snowflake can access data in other Snowflake databases through                                                                                                                     
features like Secure Data Sharing and database links, it doesn't directly "run a function" in another database                                                                                                         
via an "external function." Option C is misleading; while Secure Data Sharing is indeed used for sharing data                                                                                                          
with external parties, external functions are not the primary mechanism for data sharing. Finally, Option D                                                                                                            
refers to data ingestion, which is typically handled by other Snowflake features like Snowpipe or COPY INTO,                                                                                                           
not directly by external functions.                                                                                                                                                                                    
Further Research:                                                                                                                                                                                                      
Snowflake Documentation on External Functions: https://docs.snowflake.com/en/sql-reference/externalfunctions.html                                                                                                      
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
---                                                                                                                                                                                                                    
Which of the following describes external functions in Snowflake?                                                                                                                                                      
                                                                                                                                                                                                                       
A. They are a type of User-defined Function (UDF).<br>B. They contain their own SQL code.<br>C. They call code that is stored inside of Snowflake.<br>D. They can return multiple rows for each row received.          
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>A</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
Here's a detailed justification for why option A is the correct answer, along with supporting information and                                                                                                          
authoritative links:                                                                                                                                                                                                   
External functions in Snowflake are indeed a specialized type of User-Defined Function (UDF). UDFs, in                                                                                                                 
general, allow users to extend Snowflake's built-in SQL functionality with custom logic. External functions                                                                                                            
specifically achieve this by enabling you to call code that resides and executes outside of the Snowflake                                                                                                              
environment. They act as a bridge, allowing SQL queries to interact with external services, applications, or                                                                                                           
compute environments.                                                                                                                                                                                                  
Option B is incorrect because external functions, unlike standard UDFs, don't contain their own SQL code. The                                                                                                          
logic they execute is hosted externally, typically on a cloud platform like AWS Lambda, Google Cloud                                                                                                                   
Functions, or Azure Functions. The external function definition in Snowflake only specifies how to connect to                                                                                                          
the external service, the expected data formats, and how to interpret the results.                                                                                                                                     
Option C is incorrect because external functions, by definition, call code that is not stored inside Snowflake.                                                                                                        
Regular UDFs execute code within Snowflake's secure environment; external functions leverage externalcompute resources. This capability is particularly useful for computationally intensive tasks, integration with   
existing APIs, or leveraging specialized algorithms that are not readily available within Snowflake itself.                                                                                                            
Option D, while possible, is not the defining characteristic of external functions. It is true that external                                                                                                           
functions can return multiple rows for each row received (similar to a table function), but this is not unique to                                                                                                      
external functions. Standard UDFs, especially table UDFs, can also return multiple rows. The defining                                                                                                                  
difference remains that external functions execute code outside of Snowflake.                                                                                                                                          
In summary, external functions are a subclass of UDFs, distinguished by their ability to execute code                                                                                                                  
externally, which is fundamental to their purpose of integrating Snowflake with external services and                                                                                                                  
leveraging external compute power. This makes option A the most accurate and comprehensive description.                                                                                                                
Further research:                                                                                                                                                                                                      
Snowflake Documentation on External Functions: https://docs.snowflake.com/en/sql-reference/externalfunctions.html                                                                                                      
Snowflake Blog Post on External Functions: (Search Snowflake blog for "external functions" to find relevant                                                                                                            
use case articles.)                                                                                                                                                                                                    
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
---                                                                                                                                                                                                                    
Which statistic displayed in a Query Profile is specific to external functions?                                                                                                                                        
                                                                                                                                                                                                                       
A. Bytes written<br>B. Total invocations<br>C. Partitions scanned<br>D. Bytes sent over the network                                                                                                                    
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>B</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
The correct answer is B. Total invocations. This statistic uniquely pertains to external functions within                                                                                                              
Snowflake's query profile. External functions, unlike native Snowflake functions, invoke code residing outside                                                                                                         
the Snowflake environment, typically in a cloud provider like AWS Lambda or Azure Functions. Consequently,                                                                                                             
the "total invocations" metric tracks how many times Snowflake had to call this external code during the                                                                                                               
query execution. Options A, C, and D, while relevant to query performance, are not specific to externalfunction calls. "Bytes written" reflects data output during various operations, "partitions scanned" pertains to
data access within Snowflake storage, and "bytes sent over the network" could relate to many aspects of                                                                                                                
data transfer during a query, not solely external function interaction. Therefore, "total invocations" provides                                                                                                        
the most direct insight into external function behavior and workload. It helps understand the computational                                                                                                            
effort being outsourced, influencing cost and performance considerations.                                                                                                                                              
Supporting Links:                                                                                                                                                                                                      
Snowflake Documentation on Query Profile: https://docs.snowflake.com/en/user-guide/ui-query-profile.html                                                                                                               
(Specifically look for the explanation of "External Functions" section)                                                                                                                                                
Snowflake Documentation on External Functions: https://docs.snowflake.com/en/sql-reference/externalfunctions.html                                                                                                      
Snowflake Blog on Query Profiling: (Search on Snowflake Blog site for posts on query profiling) This may                                                                                                               
give further insights into interpreting these statistics.                                                                                                                                                              
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
---                                                                                                                                                                                                                    
How should a Snowflake user access a third-party SaaS service to process unstructured data?                                                                                                                            
                                                                                                                                                                                                                       
A. Use internal functions.<br>B. Use external functions.<br>C. Use process functions.<br>D. Use an API gateway.                                                                                                        
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>B</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
The correct answer is B: Use external functions. Let's break down why.                                                                                                                                                 
Snowflake's architecture is designed to securely and efficiently interact with services                                                                                                                                
outside of its managed environment. When a Snowflake user needs to access a thirdparty SaaS service, especially for processing unstructured data (which often requires                                                 
specialized tools not native to Snowflake), a bridge is necessary. External functions                                                                                                                                  
provide this bridge.                                                                                                                                                                                                   
External functions act as user-defined functions (UDFs) in Snowflake that call out to                                                                                                                                  
code running outside of Snowflake, often in a cloud environment like AWS API Gateway,                                                                                                                                  
Azure Functions, or Google Cloud Functions. This allows you to leverage the specialized                                                                                                                                
capabilities of the third-party SaaS service without having to directly ingest the                                                                                                                                     
unstructured data into Snowflake. The external function essentially wraps the API call                                                                                                                                 
to the SaaS service.                                                                                                                                                                                                   
Here's why the other options are less suitable:                                                                                                                                                                        
A. Use internal functions: Internal functions are executed within the Snowflakeenvironment. They lack the ability to directly interact with external services. They're                                                 
good for calculations and manipulations within Snowflake data, but not for calling                                                                                                                                     
outside systems.                                                                                                                                                                                                       
C. Use process functions: Process functions is not a standard term within Snowflake's or                                                                                                                               
general database/cloud computing terminology.                                                                                                                                                                          
D. Use an API gateway: While an API Gateway (like AWS API Gateway) can be part of the                                                                                                                                  
solution, it isn't the direct method a Snowflake user would invoke the third-party SaaS.                                                                                                                               
An API Gateway helps manage and secure the API endpoints exposed by the SaaS, but                                                                                                                                      
the Snowflake user still needs a mechanism (like an external function) to call that API.                                                                                                                               
The external function uses the API gateway.                                                                                                                                                                            
In summary, external functions provide the necessary interface for Snowflake to interact                                                                                                                               
with external services, making them the best way to access and utilize a third-party                                                                                                                                   
SaaS service for processing unstructured data. They provide a secure, managed way to                                                                                                                                   
extend Snowflake's functionality.                                                                                                                                                                                      
For further research, refer to the official Snowflake documentation on external                                                                                                                                        
functions:                                                                                                                                                                                                             
Snowflake External Functions                                                                                                                                                                                           
Creating External Functions                                                                                                                                                                                            
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
