# Materialized Views                                                                                                                                                                                                                                                                                                                      
What is a limitation of a Materialized View?                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                          
A. A Materialized View cannot support any aggregate functions<br>B. A Materialized View can only reference up to two tables<br>C. A Materialized View cannot be joined with other tables<br>D. A Materialized View cannot be defined with a JOIN                                                                                          
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>D</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is D: A Materialized View cannot be defined with a JOIN. Materialized Views in Snowflake                                                                                                                                                                                                                               
are designed to pre-compute and store the results of a query for faster access. However, they have limitations                                                                                                                                                                                                                            
on the complexity of the queries they can use. Currently, Snowflake does not support creating Materialized                                                                                                                                                                                                                                
Views that are based on JOIN operations. This is a significant restriction as JOINs are fundamental for                                                                                                                                                                                                                                   
combining data from multiple tables in a relational database.                                                                                                                                                                                                                                                                             
Option A is incorrect because Materialized Views can support aggregate functions (SUM, AVG, COUNT, etc.).                                                                                                                                                                                                                                 
This is a common use case for Materialized Views - to pre-aggregate data for reporting and analytical                                                                                                                                                                                                                                     
purposes. Option B is also incorrect; the number of tables a Materialized View can reference isn't strictly                                                                                                                                                                                                                               
limited to two, although the complexity of the query does play a role, but primarily, JOINs are the prohibitive                                                                                                                                                                                                                           
factor, not the count. Option C is incorrect because Materialized Views can be joined with other tables in                                                                                                                                                                                                                                
subsequent queries, once they exist. The constraint is at the definition stage, not the usage stage. TheMaterialized View acts like a regular table once created.                                                                                                                                                                         
The limitation of not supporting JOINs is in place because materializing JOIN results can lead to complex                                                                                                                                                                                                                                 
update and maintenance challenges, especially in scenarios involving frequent data changes in the underlying                                                                                                                                                                                                                              
tables. Maintaining the consistency and accuracy of materialized JOIN results would require significant                                                                                                                                                                                                                                   
overhead. Therefore, Snowflake imposes this restriction to ensure the efficiency and reliability of its                                                                                                                                                                                                                                   
Materialized View implementation. To work around this limitation, one might need to create multiple                                                                                                                                                                                                                                       
Materialized Views and then join them in a subsequent query, or use regular views and appropriate                                                                                                                                                                                                                                         
clustering/partitioning strategies on the base tables.                                                                                                                                                                                                                                                                                    
Authoritative Links for Further Research:                                                                                                                                                                                                                                                                                                 
Snowflake Documentation on Materialized Views: https://docs.snowflake.com/en/user-guide/viewsmaterialized.html                                                                                                                                                                                                                            
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
What impacts the credit consumption of maintaining a materialized view? (Choose two.)                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                          
A. Whether or not it is also a secure view<br>B. How often the underlying base table is queried<br>C. How often the base table changes<br>D. Whether the materialized view has a cluster key defined<br>E. How often the materialized view is queried                                                                                     
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>C, D</strong>                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                          
The correct answer is CD. Here's why:                                                                                                                                                                                                                                                                                                     
C. How often the base table changes: Materialized views are pre-computed data sets based on underlying                                                                                                                                                                                                                                    
tables. When the base table changes, Snowflake needs to refresh the materialized view to keep it consistent.                                                                                                                                                                                                                              
This refresh process consumes credits because it involves compute resources to re-execute the defining                                                                                                                                                                                                                                    
query and update the materialized view's storage. Frequent base table changes lead to more frequent                                                                                                                                                                                                                                       
refreshes and thus higher credit consumption.                                                                                                                                                                                                                                                                                             
D. Whether the materialized view has a cluster key defined: Cluster keys are used to physically organize the                                                                                                                                                                                                                              
data in a table (or materialized view) for efficient query processing. While cluster keys themselves don't                                                                                                                                                                                                                                
directly cause credit consumption, they indirectly affect it by influencing the efficiency of materialized view                                                                                                                                                                                                                           
refreshes. If the materialized view is clustered well, the refresh operation might be more efficient as only the                                                                                                                                                                                                                          
relevant partitions needs to be updated. Conversely, a poorly clustered view can lead to increased data                                                                                                                                                                                                                                   
shuffling and re-writing during refresh, thus consuming more credits.                                                                                                                                                                                                                                                                     
Option A is incorrect because secure views are a different feature and the security aspect does not directly                                                                                                                                                                                                                              
influence the refresh process which consumes credits for materialized views.Option B is incorrect because the                                                                                                                                                                                                                             
credit consumption related to querying the underlying base table is not relevant to the credit consumption of                                                                                                                                                                                                                             
maintaining the materialized view.Option E is incorrect because querying the materialized view consumes                                                                                                                                                                                                                                   
credits during the query itself, but it does not impact the credit consumption of maintaining the materialized                                                                                                                                                                                                                            
view (e.g., during refresh).In summary: Materialized view maintenance costs are primarily driven by how                                                                                                                                                                                                                                   
frequently the underlying data changes and the efficiency of data organization (clustering) within the                                                                                                                                                                                                                                    
materialized view to perform these updates efficiently.                                                                                                                                                                                                                                                                                   
Authoritative Links:                                                                                                                                                                                                                                                                                                                      
Snowflake Materialized Views: https://docs.snowflake.com/en/user-guide/views-materialized.html                                                                                                                                                                                                                                            
Understanding Snowflake Credit Consumption: https://www.snowflake.com/blog/understanding-snowflakecredit-consumption/                                                                                                                                                                                                                     
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
A materialized view should be created when which of the following occurs? (Choose two.)                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                          
A. There is minimal cost associated with running the query.<br>B. The query consumes many compute resources every time it runs.<br>C. The base table gets updated frequently.<br>D. The query is highly optimized and does not consume many compute resources.<br>E. The results of the query do not change often and are used frequently.
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>B, E</strong>                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                          
The correct answer is B and E because materialized views are best suited for specific scenarios where they                                                                                                                                                                                                                                
offer significant performance benefits.                                                                                                                                                                                                                                                                                                   
Option B is correct because materialized views address the problem of resource-intensive queries. When a                                                                                                                                                                                                                                  
query consumes substantial compute resources each time it runs, creating a materialized view allows you to                                                                                                                                                                                                                                
pre-compute and store the results. Subsequent queries can then retrieve the data directly from the                                                                                                                                                                                                                                        
materialized view, drastically reducing compute costs and response times. This is especially beneficial for                                                                                                                                                                                                                               
complex aggregations or joins performed frequently.                                                                                                                                                                                                                                                                                       
Option E is correct because materialized views shine when the results of a query are relatively static and                                                                                                                                                                                                                                
heavily used. If the underlying data doesn't change frequently, the materialized view doesn't need constant                                                                                                                                                                                                                               
refreshing. This allows users to access the pre-computed results repeatedly without incurring the cost of rerunning the query. The more frequently the pre-computed results are used, the greater the benefit of having                                                                                                                   
the materialized view.                                                                                                                                                                                                                                                                                                                    
Option A is incorrect since if the query has minimal cost, a materialized view is unnecessary overhead. Option                                                                                                                                                                                                                            
C is generally incorrect; frequent base table updates imply equally frequent materialized view refreshes,                                                                                                                                                                                                                                 
which can negate the performance benefits by adding computational overhead. Option D is also incorrect; if                                                                                                                                                                                                                                
the query is already highly optimized and efficient, a materialized view would provide little to no performance                                                                                                                                                                                                                           
improvement and would only add storage cost and potential refresh overhead.                                                                                                                                                                                                                                                               
Further reading on Snowflake materialized views:                                                                                                                                                                                                                                                                                          
Snowflake Documentation: https://docs.snowflake.com/en/user-guide/views-materialized.html                                                                                                                                                                                                                                                 
Snowflake Blog: https://www.snowflake.com/blog/materialized-views-in-snowflake-a-new-approach-toimproving-query-performance/                                                                                                                                                                                                              
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
Which of the following view types are available in Snowflake? (Choose two.)                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                          
A. Layered view<br>B. Secure view<br>C. External view<br>D. Embedded view<br>E. Materialized view                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>B, E</strong>                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                          
The correct answer is B. Secure view and E. Materialized view. Let's justify each choice and explain why the                                                                                                                                                                                                                              
others are incorrect:                                                                                                                                                                                                                                                                                                                     
Secure View (B): Secure views in Snowflake enhance data security by preventing direct access to the                                                                                                                                                                                                                                       
underlying tables. When a user queries a secure view, they only see the data the view is defined to show, even                                                                                                                                                                                                                            
if they have privileges on the underlying table. Snowflake transparently executes the view's query, ensuring                                                                                                                                                                                                                              
data masking and fine-grained access control at the view level. This is a key security feature.                                                                                                                                                                                                                                           
Materialized View (E): Materialized views precompute and store the results of a view's query. This allows for                                                                                                                                                                                                                             
faster query performance when the view is accessed, as the data doesn't need to be recalculated each time.                                                                                                                                                                                                                                
The data in a materialized view is automatically refreshed by Snowflake based on changes to the underlying                                                                                                                                                                                                                                
tables. This trade-off between storage and performance is a standard data warehousing concept.                                                                                                                                                                                                                                            
Now, let's look at why the other options are incorrect:                                                                                                                                                                                                                                                                                   
Layered view (A): While you can create views on top of other views to create a "layered" structure, "Layered                                                                                                                                                                                                                              
view" is not a specific type of view explicitly defined and recognized as a standard view type by Snowflake.                                                                                                                                                                                                                              
This is more of an architectural pattern.                                                                                                                                                                                                                                                                                                 
External view (C): External tables are a supported feature in Snowflake, which point to data stored in external                                                                                                                                                                                                                           
cloud storage like AWS S3, Azure Blob Storage, or Google Cloud Storage. However, there are no 'external                                                                                                                                                                                                                                   
views'. You can create views on external tables, but this just creates a standard view that pulls data from the                                                                                                                                                                                                                           
external table. The view itself isn't categorized as an "external view."                                                                                                                                                                                                                                                                  
Embedded view (D): "Embedded view" is not a recognized view type in the Snowflake documentation or its                                                                                                                                                                                                                                    
architecture.                                                                                                                                                                                                                                                                                                                             
In summary, Snowflake's view types include Secure views, which focus on data security and access control,                                                                                                                                                                                                                                 
and Materialized views, which focus on improving query performance. The other options, although potentially                                                                                                                                                                                                                               
related to view design patterns, are not recognized as distinct view types within the Snowflake ecosystem.                                                                                                                                                                                                                                
Authoritative Links:                                                                                                                                                                                                                                                                                                                      
Secure Views: https://docs.snowflake.com/en/user-guide/views-secure.html                                                                                                                                                                                                                                                                  
Materialized Views: https://docs.snowflake.com/en/user-guide/views-materialized.html                                                                                                                                                                                                                                                      
Views: https://docs.snowflake.com/en/user-guide/views.html                                                                                                                                                                                                                                                                                
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
A Snowflake user wants to optimize performance for a query that queries only a small number of rows in a table.                                                                                                                                                                                                                           
The rows require significant processing. The data in the table does not change frequently.                                                                                                                                                                                                                                                
What should the user do?                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                          
A. Add a clustering key to the table.<br>B. Add the search optimization service to the table.<br>C. Create a materialized view based on the query.<br>D. Enable the query acceleration service for the virtual warehouse.                                                                                                                 
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>C</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is C. Create a materialized view based on the query. Here's why:                                                                                                                                                                                                                                                       
Materialized views in Snowflake store the pre-computed results of a query. When a user queries the                                                                                                                                                                                                                                        
materialized view, Snowflake can directly return the stored results instead of re-executing the complex                                                                                                                                                                                                                                   
processing logic on the base table. This is highly beneficial when dealing with complex computations over a                                                                                                                                                                                                                               
small subset of rows, as it eliminates repetitive processing. Because the base table's data doesn't change                                                                                                                                                                                                                                
often, the materialized view will remain relatively up-to-date with minimal overhead. Option A, adding a                                                                                                                                                                                                                                  
clustering key, optimizes data retrieval based on sort order and is more suited to improving query                                                                                                                                                                                                                                        
performance over a broader range of queries, not specifically focused on complex row-level processing.                                                                                                                                                                                                                                    
Option B, the search optimization service, aims to improve the performance of point lookups using indexed                                                                                                                                                                                                                                 
columns but doesn't address computationally heavy transformations. Option D, query acceleration service,                                                                                                                                                                                                                                  
dynamically adds compute resources to a query if it requires more processing power. While helpful, it does                                                                                                                                                                                                                                
not prevent the underlying complex computations, and in this case, we're focused on avoiding those entirely.                                                                                                                                                                                                                              
Creating the materialized view provides a significant performance boost by directly addressing the                                                                                                                                                                                                                                        
requirement of avoiding repeated complex processing for a small subset of rows.                                                                                                                                                                                                                                                           
Authoritative Links:                                                                                                                                                                                                                                                                                                                      
Snowflake Documentation on Materialized Views: https://docs.snowflake.com/en/user-guide/viewsmaterialized.html                                                                                                                                                                                                                            
Snowflake Documentation on Clustering Keys: https://docs.snowflake.com/en/user-guide/tables-clusteringkeys.html                                                                                                                                                                                                                           
Snowflake Documentation on Search Optimization Service: https://docs.snowflake.com/en/userguide/search-optimization-service.html                                                                                                                                                                                                          
Snowflake Documentation on Query Acceleration Service https://docs.snowflake.com/en/user-guide/queryacceleration-service                                                                                                                                                                                                                  
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
What is a characteristic of materialized views in Snowflake?                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                          
A. Materialized views do not allow joins.<br>B. Clones of materialized views can be created directly by the user.<br>C. Multiple tables can be joined in the underlying query of a materialized view.<br>D. Aggregate functions can be used as window functions in materialized views.                                                    
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>A</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is A: Materialized views do not allow joins. In Snowflake, materialized views are designed                                                                                                                                                                                                                             
for pre-calculating and storing the results of a single query, thus improving query performance by avoiding                                                                                                                                                                                                                               
repeated computations. They are optimized for summarizing or pre-aggregating data from a single base table.                                                                                                                                                                                                                               
Consequently, joins, which combine data from multiple tables, are not supported within the definition of a                                                                                                                                                                                                                                
materialized view. This limitation stems from the fact that maintaining consistency and efficiently updating                                                                                                                                                                                                                              
materialized views becomes increasingly complex with joins, potentially diminishing the performance gains                                                                                                                                                                                                                                 
intended by using them.                                                                                                                                                                                                                                                                                                                   
Option B is incorrect. Materialized views in Snowflake cannot be directly cloned like regular tables or views by                                                                                                                                                                                                                          
user commands. Snowflake handles the underlying structure and data refresh mechanism internally. Cloning                                                                                                                                                                                                                                  
a materialized view is not a typical operation. Option C is incorrect because, as previously explained,                                                                                                                                                                                                                                   
materialized views are limited to a single base table; joins are not permitted. Option D is incorrect because                                                                                                                                                                                                                             
while aggregate functions can be used within a materialized view's query to aggregate data from a single                                                                                                                                                                                                                                  
base table, they can't be used as window functions. Window functions operate on a set of rows related to the                                                                                                                                                                                                                              
current row, and this type of functionality is not supported within materialized views. Therefore, the limitation                                                                                                                                                                                                                         
of not allowing joins is a core characteristic of materialized views within Snowflake, designed to maintain                                                                                                                                                                                                                               
efficient and reliable data pre-computation.                                                                                                                                                                                                                                                                                              
Authoritative links:                                                                                                                                                                                                                                                                                                                      
1. Snowflake Documentation on Materialized Views: https://docs.snowflake.com/en/user-guide/viewsmaterialized.html (Specifically note the sections on "Limitations" and "Considerations")                                                                                                                                                  
2. Snowflake Blog on Materialized Views: Search the Snowflake blog for articles related to                                                                                                                                                                                                                                                
materialized views and their limitations, which often highlight why joins are not supported.                                                                                                                                                                                                                                              
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
What is a characteristic of the maintenance of a materialized view?                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                          
A. Materialized views cannot be refreshed automatically.<br>B. An additional set of scripts is needed to refresh data in materialized views.<br>C. A materialized view is automatically refreshed by a Snowflake managed warehouse.<br>D. A materialized view can be set up with the auto-refresh feature using the SQL SET command.      
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>C</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is C: "A materialized view is automatically refreshed by a Snowflake managed                                                                                                                                                                                                                                           
warehouse." Materialized views in Snowflake are designed for performance optimization,                                                                                                                                                                                                                                                    
primarily for frequently executed queries that involve complex computations. Unlike standard                                                                                                                                                                                                                                              
views, which are essentially saved query definitions, materialized views store the results of their                                                                                                                                                                                                                                       
defining query as data. This allows for much faster retrieval since the data doesn't have to be                                                                                                                                                                                                                                           
recalculated every time the view is queried. Snowflake automatically manages the refresh                                                                                                                                                                                                                                                  
process for these views using a managed warehouse that is transparent to the user. This                                                                                                                                                                                                                                                   
automated maintenance is a key benefit, eliminating the need for manual scripts or scheduled                                                                                                                                                                                                                                              
jobs, as stated in options A and B. Option A is incorrect as materialized views do refresh                                                                                                                                                                                                                                                
automatically. Option B is also incorrect because you do not need to write extra scripts to update                                                                                                                                                                                                                                        
the view's data. Option D is incorrect as you don't use SQL SET commands to control auto-refresh.                                                                                                                                                                                                                                         
The automatic refresh mechanism ensures that the materialized view's data remains consistent                                                                                                                                                                                                                                              
with the base tables. This maintenance is a background process, usually triggered by changes to                                                                                                                                                                                                                                           
the underlying base tables, offering a convenient, low-maintenance approach to data                                                                                                                                                                                                                                                       
management. The system takes care of the refresh process, requiring no explicit user intervention                                                                                                                                                                                                                                         
and providing a seamless experience for users querying materialized views.Snowflake                                                                                                                                                                                                                                                       
documentation on materialized views                                                                                                                                                                                                                                                                                                       
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
Which statement accurately describes a characteristic of a materialized view?                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                          
A. A materialized view can query only a single table.<br>B. Data accessed through materialized views can be stale.<br>C. Materialized view refreshes need to be maintained by the user.<br>D. Querying a materialized view is slower than executing a query against the base table of the view.                                           
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>A</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is A, stating that a materialized view can query only a single table in                                                                                                                                                                                                                                                
Snowflake. Materialized views in Snowflake are designed for specific use cases, primarily focused                                                                                                                                                                                                                                         
on optimizing query performance by pre-computing and storing results. This design decision leads                                                                                                                                                                                                                                          
to the constraint of them being based on a single base table. They essentially provide a                                                                                                                                                                                                                                                  
materialized snapshot of a single source, which is updated incrementally. This limitation differs                                                                                                                                                                                                                                         
from standard views, which can combine data from multiple tables using joins and complex logic.                                                                                                                                                                                                                                           
B is incorrect because Snowflake automatically manages the refresh of materialized views;                                                                                                                                                                                                                                                 
therefore the data is not stale. C is incorrect because Snowflake handles materialized view                                                                                                                                                                                                                                               
refresh automatically and no maintenance is required from the user. D is incorrect because                                                                                                                                                                                                                                                
querying a materialized view is generally faster because the results have already been calculated,                                                                                                                                                                                                                                        
unlike running a full query against the base table. By restricting to a single table, Snowflake can                                                                                                                                                                                                                                       
efficiently manage and refresh the materialized view's data, maximizing the performance                                                                                                                                                                                                                                                   
benefits.                                                                                                                                                                                                                                                                                                                                 
For further research, refer to the official Snowflake documentation on materialized views:                                                                                                                                                                                                                                                
https://docs.snowflake.com/en/user-guide/views-materialized.html                                                                                                                                                                                                                                                                          
https://docs.snowflake.com/en/sql-reference/sql/create-materialized-view.html                                                                                                                                                                                                                                                             
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
Why would a Snowflake user decide to use a materialized view instead of a regular view?                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                          
A. The base tables do not change frequently.<br>B. The results of the view change often.<br>C. The query is not resource intensive.<br>D. The query results are not used frequently.                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>A</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is A. The base tables do not change frequently. Here's why:                                                                                                                                                                                                                                                            
Materialized views in Snowflake store pre-computed results, unlike regular views which execute                                                                                                                                                                                                                                            
their defining query every time they're accessed. This caching mechanism makes materialized                                                                                                                                                                                                                                               
views significantly faster for frequently accessed queries, particularly those involving complex                                                                                                                                                                                                                                          
aggregations or joins. However, this benefit comes at a cost: materialized views require ongoing                                                                                                                                                                                                                                          
maintenance.                                                                                                                                                                                                                                                                                                                              
When base tables change, Snowflake must refresh the materialized view to reflect those changes.                                                                                                                                                                                                                                           
This refresh process consumes resources and incurs a cost. Therefore, materialized views are                                                                                                                                                                                                                                              
most beneficial when the base tables donâ€™t change frequently. If data is constantly being updated,                                                                                                                                                                                                                                        
the frequent refreshes could negate the performance benefits and become expensive.                                                                                                                                                                                                                                                        
Option B is incorrect because frequently changing view results would necessitate frequent                                                                                                                                                                                                                                                 
refreshes of the materialized view, thus diminishing its performance advantage and potentially                                                                                                                                                                                                                                            
incurring unnecessary costs. Option C is incorrect since materialized views are most valuable forresource-intensive queries, where the time saved by using pre-computed results is significant.                                                                                                                                           
Option D is incorrect because materialized views are designed for frequently accessed data and                                                                                                                                                                                                                                            
are a poor choice for rarely used query results.                                                                                                                                                                                                                                                                                          
In essence, choosing between materialized and regular views hinges on the balance between                                                                                                                                                                                                                                                 
query performance and maintenance cost. Materialized views offer superior performance for                                                                                                                                                                                                                                                 
complex, frequently executed queries on relatively static data, making option A the most                                                                                                                                                                                                                                                  
accurate justification.                                                                                                                                                                                                                                                                                                                   
Supporting links:                                                                                                                                                                                                                                                                                                                         
Snowflake Documentation on Materialized Views: https://docs.snowflake.com/en/userguide/views-materialized                                                                                                                                                                                                                                 
Snowflake Blog on Materialized Views: https://www.snowflake.com/blog/how-snowflakematerialized-views-can-make-your-data-run-faster/                                                                                                                                                                                                       
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
What Snowflake database object is derived from a query specification, stored for later use, and can speed up                                                                                                                                                                                                                              
expensive aggregation on large data sets?                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                          
A. Temporary table<br>B. External table<br>C. Secure view<br>D. Materialized view                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>D</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is D, Materialized View. Materialized views are database objects in Snowflake                                                                                                                                                                                                                                          
that store the results of a query. Unlike standard views that execute their underlying query every                                                                                                                                                                                                                                        
time they are accessed, materialized views persist the result set to disk. This pre-computed result                                                                                                                                                                                                                                       
set can drastically speed up query performance, especially for complex aggregations or joins that                                                                                                                                                                                                                                         
involve large datasets. This is because the database can retrieve data directly from the                                                                                                                                                                                                                                                  
materialized view instead of re-executing the resource-intensive query each time. Materialized                                                                                                                                                                                                                                            
views are derived from a query specification, making them dependent on a base table or view.                                                                                                                                                                                                                                              
Changes to the underlying tables trigger an automatic refresh process (in Snowflake), ensuring                                                                                                                                                                                                                                            
the materialized view data is relatively up-to-date, balancing freshness with performance gains.                                                                                                                                                                                                                                          
Temporary tables (A) are session-specific and not persisted beyond the session, making them                                                                                                                                                                                                                                               
unsuitable for long-term performance enhancements across multiple sessions or users. External                                                                                                                                                                                                                                             
tables (B) point to data stored outside of Snowflake and do not involve the pre-computation or                                                                                                                                                                                                                                            
storage of results. Secure views (C) focus on data access control and do not perform result                                                                                                                                                                                                                                               
storage or performance acceleration in the manner that materialized views do. Materialized views                                                                                                                                                                                                                                          
are optimized for read performance in the context of analytical workloads.                                                                                                                                                                                                                                                                
https://docs.snowflake.com/en/user-guide/viewsmaterialized.htmlhttps://www.snowflake.com/blog/materialized-views-snowflake-performance/                                                                                                                                                                                                   
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
What is used to denote a pre-computed data set derived from a SELECT query specification and stored for later                                                                                                                                                                                                                             
use?                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                          
A. View<br>B. Secure view<br>C. Materialized view<br>D. External table                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>C</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The Correct answer is ["C"]                                                                                                                                                                                                                                                                                                               
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
When does a materialized view get suspended in Snowflake?                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                          
A. When a column is added to the base table<br>B. When a column is dropped from the base table<br>C. When a DML operation is run on the base table<br>D. When the base table is reclustered                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>B</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
Materialized views in Snowflake are designed to automatically reflect changes in their base                                                                                                                                                                                                                                               
tables. However, certain structural alterations to the base table can render the materialized                                                                                                                                                                                                                                             
view's definition invalid or require a complete rebuild. Dropping a column from the base table                                                                                                                                                                                                                                            
directly affects the materialized view if that column was included in the viewâ€™s definition. This                                                                                                                                                                                                                                         
invalidates the mapping between the view and the underlying data, necessitating suspension.                                                                                                                                                                                                                                               
Snowflake automatically suspends the materialized view to prevent inconsistencies. Adding a                                                                                                                                                                                                                                               
column to the base table, on the other hand, does not directly invalidate the existing view                                                                                                                                                                                                                                               
definition if that new column is not included in the view definition. DML operations (like INSERT,                                                                                                                                                                                                                                        
UPDATE, DELETE) on the base table are automatically reflected in the materialized view; hence,                                                                                                                                                                                                                                            
they do not cause suspension. Reclustering a base table also doesn't invalidate the materialized                                                                                                                                                                                                                                          
view's structure; it only changes the organization of data, which the materialized view can adapt                                                                                                                                                                                                                                         
to automatically. The suspension mechanism ensures data integrity and prevents queries from                                                                                                                                                                                                                                               
returning unexpected results based on an outdated view definition. After the column is dropped,                                                                                                                                                                                                                                           
to use the view again you would need to recreate the materialized view.                                                                                                                                                                                                                                                                   
https://docs.snowflake.com/en/user-guide/viewsmaterializedhttps://docs.snowflake.com/en/sql-reference/sql/alter-materialized-view                                                                                                                                                                                                         
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
Which Snowflake object uses credits for maintenance?                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                          
A. Regular table<br>B. Regular view<br>C. Materialized view<br>D. Cached query result                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>C</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is C, Materialized view. Materialized views in Snowflake, unlike regular tables                                                                                                                                                                                                                                        
and views, consume credits for maintenance because they involve the pre-computation and                                                                                                                                                                                                                                                   
storage of query results. This process requires background processing to keep the materialized                                                                                                                                                                                                                                            
view up-to-date with changes in the underlying base tables. Snowflake automatically manages                                                                                                                                                                                                                                               
this refreshing activity, which directly translates to credit consumption. Regular tables are simply                                                                                                                                                                                                                                      
data storage containers and do not undergo automated maintenance that consumes credits.                                                                                                                                                                                                                                                   
Regular views are merely stored query definitions and donâ€™t involve data storage or maintenance                                                                                                                                                                                                                                           
processing. Cached query results, while also involving storage, are temporary and automatically                                                                                                                                                                                                                                           
managed by Snowflakeâ€™s query optimization engine and donâ€™t incur dedicated maintenance                                                                                                                                                                                                                                                    
credits. Therefore, only materialized views require ongoing processing to remain consistent, thus                                                                                                                                                                                                                                         
using credits. The maintenance cost covers both the initial creation and the periodic automatic                                                                                                                                                                                                                                           
refresh of the materialized view. The consumption rate depends on various factors including data                                                                                                                                                                                                                                          
volume changes and the complexity of the view's definition. For further details, refer to the                                                                                                                                                                                                                                             
official Snowflake documentation on Materialized Views: https://docs.snowflake.com/en/user-guide/views-materialized.html and Snowflake's understanding credits:                                                                                                                                                                           
https://www.snowflake.com/pricing/.                                                                                                                                                                                                                                                                                                       
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
What will happen if a Snowflake user suspends the updates to a materialized view?                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                          
A. The queries on that view will generate an error message.<br>B. The queries on that view will return the last stored data.<br>C. The queries on that view will return the data using Time Travel.<br>D. The queries on that view will return the data with a warning message.                                                           
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>A</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
Let's analyze the behavior of materialized views when their updates are suspended in                                                                                                                                                                                                                                                      
Snowflake. When a materialized view's refresh process is suspended, the data within it                                                                                                                                                                                                                                                    
becomes static and no longer reflects changes to its base tables. If a query is executed                                                                                                                                                                                                                                                  
against a suspended materialized view, Snowflake will not attempt to refresh it or                                                                                                                                                                                                                                                        
calculate results based on the current data in the base tables. Instead, because the view                                                                                                                                                                                                                                                 
is effectively a stale snapshot, Snowflake will respond with an error. The error message                                                                                                                                                                                                                                                  
is designed to inform the user that the materialized view is not actively maintaining its                                                                                                                                                                                                                                                 
data. Time Travel (option C) is a feature that allows access to historical data, but it                                                                                                                                                                                                                                                   
doesn't come into play when a materialized view is suspended. The materialized viewâ€™s                                                                                                                                                                                                                                                     
data remains as the last stored version as option B describes. The view does not                                                                                                                                                                                                                                                          
calculate the data when updates are suspended. Option D is also incorrect because                                                                                                                                                                                                                                                         
Snowflake returns an error, not a warning message. The error ensures that users are                                                                                                                                                                                                                                                       
aware that they are not getting the most current results. Therefore, the correct answer                                                                                                                                                                                                                                                   
is A, the queries on the view will generate an error.                                                                                                                                                                                                                                                                                     
For further understanding, refer to the official Snowflake documentation on materialized                                                                                                                                                                                                                                                  
views: https://docs.snowflake.com/en/user-guide/views-materialized.html and                                                                                                                                                                                                                                                               
specifically, the section discussing refreshing and suspended states. You can also                                                                                                                                                                                                                                                        
explore the error handling section of the documentation to see what errors may occur:                                                                                                                                                                                                                                                     
https://docs.snowflake.com/en/sql-reference/error-handling.html. These resources                                                                                                                                                                                                                                                          
offer detailed information on how materialized views function within the Snowflake                                                                                                                                                                                                                                                        
environment.                                                                                                                                                                                                                                                                                                                              
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
Which Snowflake object will consume credits during automatic background maintenance?                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                          
A. View<br>B. Table<br>C. External table<br>D. Materialized view                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>D</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The Correct answer is ["D"]                                                                                                                                                                                                                                                                                                               
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
When would creating and using a standard view be preferable to using a materialized view?                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                          
A. The underlying query of the view takes a lot of time to run.<br>B. The underlying query of the view is resource-intensive.<br>C. The underlying query of the view is run on large data sets.<br>D. The view results change often.                                                                                                      
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>D</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
The correct answer is D, "The view results change often." Standard views are virtual,                                                                                                                                                                                                                                                     
meaning they don't store data. Instead, they execute the underlying query each time                                                                                                                                                                                                                                                       
they're accessed. This makes them ideal when the data they're based on is frequently                                                                                                                                                                                                                                                      
changing because they always provide the most up-to-date results. Materialized views,                                                                                                                                                                                                                                                     
on the other hand, store pre-computed results. While this can speed up access for static                                                                                                                                                                                                                                                  
data, it creates overhead when data changes often. Each time the base table changes,                                                                                                                                                                                                                                                      
the materialized view needs to be refreshed, which can be resource-intensive and delay                                                                                                                                                                                                                                                    
access to the most current information. If the results are highly volatile, the constant                                                                                                                                                                                                                                                  
refreshes required for materialized views will often outweigh their performance benefits                                                                                                                                                                                                                                                  
and make standard views the more efficient choice. Options A, B, and C, which pertain to                                                                                                                                                                                                                                                  
long-running, resource-intensive queries over large datasets, actually favor materialized                                                                                                                                                                                                                                                 
views since these benefit most from caching pre-computed results. Therefore, when the                                                                                                                                                                                                                                                     
data changes frequently, standard views offer a simpler, more up-to-date solution than                                                                                                                                                                                                                                                    
materialized views.                                                                                                                                                                                                                                                                                                                       
For further research, you can refer to Snowflake's official documentation:                                                                                                                                                                                                                                                                
Understanding Views: This provides a general introduction to views in Snowflake.                                                                                                                                                                                                                                                          
Working with Materialized Views: This details how materialized views work, their                                                                                                                                                                                                                                                          
benefits, and their costs.                                                                                                                                                                                                                                                                                                                
Standard vs. Materialized Views: This offers a blog post that contrasts standard and                                                                                                                                                                                                                                                      
materialized views, highlighting when to use which.                                                                                                                                                                                                                                                                                       
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
---                                                                                                                                                                                                                                                                                                                                       
Which object consumes Snowflake credits for its maintenance?                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                          
A. Materialized view<br>B. View<br>C. External table<br>D. Table                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
<details>                                                                                                                                                                                                                                                                                                                                 
<summary><strong>âœ… Answer : </strong></summary>                                                                                                                                                                                                                                                                                          
<strong>A</strong>                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                          
Here's a detailed justification for why materialized views consume Snowflake credits for                                                                                                                                                                                                                                                  
maintenance, while the other options do not:                                                                                                                                                                                                                                                                                              
Materialized views in Snowflake differ significantly from standard views. A regular view                                                                                                                                                                                                                                                  
is simply a stored query; it doesn't store data. When a regular view is queried, Snowflake                                                                                                                                                                                                                                                
executes the underlying query against the base tables in real-time. This consumes                                                                                                                                                                                                                                                         
credits only during query execution.                                                                                                                                                                                                                                                                                                      
In contrast, a materialized view physically stores the results of a query. This precomputed data allows for much faster query performance because Snowflake doesn't                                                                                                                                                                       
need to re-execute the underlying query every time. However, maintaining this                                                                                                                                                                                                                                                             
materialized data has a cost.                                                                                                                                                                                                                                                                                                             
Snowflake automatically and periodically refreshes materialized views to keep them                                                                                                                                                                                                                                                        
synchronized with the base tables. This refresh process involves re-executing the                                                                                                                                                                                                                                                         
underlying query and updating the stored results. This refresh is managed by Snowflake                                                                                                                                                                                                                                                    
and consumes compute resources, which are billed as Snowflake credits.                                                                                                                                                                                                                                                                    
The refresh frequency can be influenced indirectly through factors like the freshness                                                                                                                                                                                                                                                     
requirements or how frequently the underlying data changes. However, the backgroundmaintenance activity still occurs, and credits are consumed.                                                                                                                                                                                           
Tables store data directly but don't have an automated refresh mechanism that                                                                                                                                                                                                                                                             
consumes credits after initial loading or updates. External tables simply point to data                                                                                                                                                                                                                                                   
stored outside of Snowflake (e.g., in cloud storage like AWS S3 or Azure Blob Storage);                                                                                                                                                                                                                                                   
Snowflake accesses the data directly in its external location without maintaining a local                                                                                                                                                                                                                                                 
copy through a maintenance process.                                                                                                                                                                                                                                                                                                       
Therefore, of the options provided, only materialized views incur ongoing credit                                                                                                                                                                                                                                                          
consumption for their maintenance due to the automated refresh process. This refresh                                                                                                                                                                                                                                                      
process ensures data consistency between the materialized view and the base tables it                                                                                                                                                                                                                                                     
relies on.                                                                                                                                                                                                                                                                                                                                
Authoritative Link:                                                                                                                                                                                                                                                                                                                       
Snowflake Materialized Views - The official Snowflake documentation provides detailed                                                                                                                                                                                                                                                     
information about materialized views, including their behavior and performance                                                                                                                                                                                                                                                            
considerations.                                                                                                                                                                                                                                                                                                                           
</details>                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                          
