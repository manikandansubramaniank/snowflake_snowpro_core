# Caching                                                                                                                                                                                                                                                                                                                                                                                                                                                         
A deterministic query is run at 8am, takes 5 minutes, and the results are cached. Which of the following                                                                                                                                                                                                                                                                                                                                                          
statements are true? (Choose two.)                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. The exact query will ALWAYS return the precomputed result set for the RESULT_CACHE_ACTIVE = time<br>B. The same exact query will return the precomputed results if the underlying data hasn't changed and the<br>C. The same exact query will return the precomputed results even if the underlying data has changed as long as<br>D. The 24 hour timer on the precomputed results gets renewed every time the exact query is executed                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>B, D</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Okay, let's break down why options B and D are correct for Snowflake's query result caching behavior.                                                                                                                                                                                                                                                                                                                                                             
Option B: This statement accurately describes Snowflake's result caching. When a deterministic query (one                                                                                                                                                                                                                                                                                                                                                         
that produces the same output for the same input) is executed, Snowflake caches the results. This cached                                                                                                                                                                                                                                                                                                                                                          
result will be reused if the exact query is run again, the underlying data hasn't changed, and the cache hasn't                                                                                                                                                                                                                                                                                                                                                   
expired. The default cache lifespan is 24 hours from the last access of the cached result. So, option B                                                                                                                                                                                                                                                                                                                                                           
correctly reflects these three conditions.                                                                                                                                                                                                                                                                                                                                                                                                                        
Option D: This is also a key aspect of Snowflake's caching mechanism. Each time the same exact query is                                                                                                                                                                                                                                                                                                                                                           
executed and the results are retrieved from the cache (as long as the data hasn't changed), the 24-hour timer                                                                                                                                                                                                                                                                                                                                                     
associated with that cached result is reset, extending the cache's validity. This ensures that frequently used                                                                                                                                                                                                                                                                                                                                                    
queries benefit from the cache for longer periods, leading to performance improvements.                                                                                                                                                                                                                                                                                                                                                                           
Why A and C are incorrect:                                                                                                                                                                                                                                                                                                                                                                                                                                        
Option A: This statement is incorrect because Snowflake's result cache doesn't always return the                                                                                                                                                                                                                                                                                                                                                                  
precomputed result set. It is dependent on the underlying data. If the data changes, the cached result would                                                                                                                                                                                                                                                                                                                                                      
be invalid. It also makes mention of "RESULT_CACHE_ACTIVE" which is not a setting, function, or parameter.                                                                                                                                                                                                                                                                                                                                                        
Option C: This is incorrect because Snowflake's result cache invalidates cached results when the underlying                                                                                                                                                                                                                                                                                                                                                       
data changes. It ensures data consistency. Even if the cache was accessed within the last 24 hours, a data                                                                                                                                                                                                                                                                                                                                                        
change would trigger a re-execution of the query.                                                                                                                                                                                                                                                                                                                                                                                                                 
Justification using cloud concepts:                                                                                                                                                                                                                                                                                                                                                                                                                               
Snowflake utilizes caching, a standard optimization technique in cloud data warehouses and databases.                                                                                                                                                                                                                                                                                                                                                             
Caching reduces latency and resource consumption. Snowflake's implementation of the result cache is                                                                                                                                                                                                                                                                                                                                                               
crucial to achieve its performance goals, minimizing the need to recompute query results by returning them                                                                                                                                                                                                                                                                                                                                                        
from memory whenever possible. The 24-hour expiration ensures that the cache remains valid for commonly                                                                                                                                                                                                                                                                                                                                                           
used data while preventing stale data from being returned in situations where underlying data has been                                                                                                                                                                                                                                                                                                                                                            
updated. The act of renewing the 24-hour clock each time the result is accessed is a common caching                                                                                                                                                                                                                                                                                                                                                               
implementation that aims to ensure frequently used queries don't have to be recomputed, as their results aremore likely to be valid for a longer period of time.                                                                                                                                                                                                                                                                                                  
Authoritative links:                                                                                                                                                                                                                                                                                                                                                                                                                                              
Snowflake Documentation - Using the Query Result Cache: https://docs.snowflake.com/en/userguide/querying-results-cache                                                                                                                                                                                                                                                                                                                                            
By understanding how Snowflake's result caching works, users can maximize performance and reduce                                                                                                                                                                                                                                                                                                                                                                  
resource usage while ensuring data consistency.                                                                                                                                                                                                                                                                                                                                                                                                                   
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Query results are stored in the Result Cache for how long after they are last accessed, assuming no data changes                                                                                                                                                                                                                                                                                                                                                  
have occurred?                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. 1 Hour<br>B. 3 Hours<br>C. 12 hours<br>D. 24 hours                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>D</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is D. 24 hours. Snowflake's Result Cache is a performance optimization feature that stores                                                                                                                                                                                                                                                                                                                                                     
the results of queries. This cache is designed to accelerate subsequent executions of the same query,                                                                                                                                                                                                                                                                                                                                                             
significantly reducing processing time and associated costs. The core concept is that if a query is executed                                                                                                                                                                                                                                                                                                                                                      
and the underlying data hasn't changed, the system can return the cached result rather than re-processing                                                                                                                                                                                                                                                                                                                                                         
the data.                                                                                                                                                                                                                                                                                                                                                                                                                                                         
The critical point for the question is the cache's expiration period. Snowflake’s documentation specifies that                                                                                                                                                                                                                                                                                                                                                    
cached results remain valid for 24 hours from their last access, assuming no modifications to the base tables                                                                                                                                                                                                                                                                                                                                                     
have occurred. If data changes or if the 24-hour limit is exceeded, the cache is invalidated.                                                                                                                                                                                                                                                                                                                                                                     
This 24-hour period represents a balance between providing fast access to frequently run queries and                                                                                                                                                                                                                                                                                                                                                              
ensuring data consistency. It prevents users from working with stale information while optimizing query                                                                                                                                                                                                                                                                                                                                                           
performance. The Result Cache doesn't actively flush or remove cached results before this period as long as                                                                                                                                                                                                                                                                                                                                                       
data remains unchanged and it has been accessed within the 24-hour window. Options A, B and C are all                                                                                                                                                                                                                                                                                                                                                             
incorrect because they don’t match Snowflake’s specified caching expiration period. Therefore, 24 hours is                                                                                                                                                                                                                                                                                                                                                        
the correct duration for which result-cache results are stored in Snowflake, given no data changes and active                                                                                                                                                                                                                                                                                                                                                     
access within this period.                                                                                                                                                                                                                                                                                                                                                                                                                                        
Authoritative links:                                                                                                                                                                                                                                                                                                                                                                                                                                              
Snowflake Documentation on Result Caching: https://docs.snowflake.com/en/user-guide/querying-cacheddata.html                                                                                                                                                                                                                                                                                                                                                      
Snowflake Performance optimization: https://www.snowflake.com/blog/snowflake-performanceoptimization/                                                                                                                                                                                                                                                                                                                                                             
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
True or False: Some queries can be answered through the metadata cache and do not require an active Virtual                                                                                                                                                                                                                                                                                                                                                       
Warehouse.                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. True<br>B. False                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The statement is True. Snowflake's architecture employs a metadata layer that stores information about                                                                                                                                                                                                                                                                                                                                                            
tables, columns, schemas, and other database objects. This metadata is actively cached for rapid access.                                                                                                                                                                                                                                                                                                                                                          
Many queries that solely require metadata information, such as those retrieving table schemas (e.g.,                                                                                                                                                                                                                                                                                                                                                              
DESCRIBE TABLE) or the list of tables in a database (SHOW TABLES), can be entirely resolved by consulting                                                                                                                                                                                                                                                                                                                                                         
this metadata cache. These operations do not need to access the actual data stored in storage, and thus, they                                                                                                                                                                                                                                                                                                                                                     
do not necessitate the activation of a virtual warehouse. This design significantly improves query performance                                                                                                                                                                                                                                                                                                                                                    
and reduces cost by avoiding unnecessary warehouse compute consumption. The metadata cache is separate                                                                                                                                                                                                                                                                                                                                                            
from the query processing and data storage layers. Snowflake optimizes metadata storage for quick retrieval,                                                                                                                                                                                                                                                                                                                                                      
enabling such queries to execute extremely fast and inexpensively. Only queries that involve retrieving actual                                                                                                                                                                                                                                                                                                                                                    
data from tables require a running virtual warehouse. Effectively leveraging the metadata cache is a core part                                                                                                                                                                                                                                                                                                                                                    
of Snowflake's optimized performance and cost management strategy. Therefore, a significant subset of                                                                                                                                                                                                                                                                                                                                                             
queries can indeed be answered through the metadata cache without a virtual warehouse, making the original                                                                                                                                                                                                                                                                                                                                                        
statement true.                                                                                                                                                                                                                                                                                                                                                                                                                                                   
Here are some resources for more information:Snowflake Documentation - Metadata Management: https://docs.snowflake.com/en/user-guide/metadatamanagement.html                                                                                                                                                                                                                                                                                                      
Snowflake University Course - Architecture Overview: Consider enrolling in courses within Snowflake                                                                                                                                                                                                                                                                                                                                                               
University for deeper technical understanding.                                                                                                                                                                                                                                                                                                                                                                                                                    
Snowflake Architecture Deep Dive: Articles online from blogs or reputable cloud vendors will help                                                                                                                                                                                                                                                                                                                                                                 
understanding how snowflake queries data.                                                                                                                                                                                                                                                                                                                                                                                                                         
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
True or False: It is possible for a user to run a query against the query result cache without requiring an active                                                                                                                                                                                                                                                                                                                                                
Warehouse.                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. True<br>B. False                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is True. Snowflake's query result cache operates independently of active warehouses.                                                                                                                                                                                                                                                                                                                                                           
This means that if a query's identical results are already stored in the cache, a user can retrieve them without                                                                                                                                                                                                                                                                                                                                                  
requiring a running warehouse. When a query is executed, Snowflake first checks the query result cache. If amatching result is found, Snowflake returns this cached data directly, bypassing the need to use any compute                                                                                                                                                                                                                                          
resources from a warehouse. This behavior greatly reduces query execution time and associated costs. The                                                                                                                                                                                                                                                                                                                                                          
query result cache is a persistent layer, not tied to specific virtual warehouses. The cached results are                                                                                                                                                                                                                                                                                                                                                         
available across all user sessions if the exact query is repeated. The cached data is typically retained for 24                                                                                                                                                                                                                                                                                                                                                   
hours by default, but this can be configured to extend or shorten the retention period. The use of the query                                                                                                                                                                                                                                                                                                                                                      
cache is transparent to the user, and they benefit from accelerated response times without any specific                                                                                                                                                                                                                                                                                                                                                           
actions required. The user needs to have necessary permissions to access the data, but no active compute                                                                                                                                                                                                                                                                                                                                                          
warehouse is necessary for cached results. This mechanism enhances Snowflake's performance and cost                                                                                                                                                                                                                                                                                                                                                               
efficiency significantly. For further reading, see the Snowflake documentation:                                                                                                                                                                                                                                                                                                                                                                                   
https://docs.snowflake.com/en/user-guide/querying-results-cache.html                                                                                                                                                                                                                                                                                                                                                                                              
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Will data cached in a warehouse be lost when the warehouse is resized?                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. Possibly, if the warehouse is resized to a smaller size and the cache no longer fits.<br>B. Yes, because the compute resource is replaced in its entirety with a new compute resource.<br>C. No, because the size of the cache is independent from the warehouse size.<br>D. Yes, because the new compute resource will no longer have access to the cache encryption key.                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is A: "Possibly, if the warehouse is resized to a smaller size and the cache no longer fits."                                                                                                                                                                                                                                                                                                                                                  
Snowflake's warehouse caching mechanism stores query results locally on the compute resources. This cache                                                                                                                                                                                                                                                                                                                                                         
is designed to accelerate subsequent queries by avoiding unnecessary data retrieval from storage. When you                                                                                                                                                                                                                                                                                                                                                        
resize a warehouse, you are essentially changing the amount of compute resources available. Increasing the                                                                                                                                                                                                                                                                                                                                                        
warehouse size adds more compute nodes and thus more cache space. However, when you resize down to a                                                                                                                                                                                                                                                                                                                                                              
smaller size, you remove compute nodes. If the existing cached data exceeds the available space in the                                                                                                                                                                                                                                                                                                                                                            
smaller warehouse, some or all of the cached data will be evicted. The principle here is about capacity                                                                                                                                                                                                                                                                                                                                                           
management within the compute nodes. The cache isn't magically moved or resized to accommodate changes.                                                                                                                                                                                                                                                                                                                                                           
It's limited to the individual compute node's resources. Therefore, a smaller warehouse may not retain the                                                                                                                                                                                                                                                                                                                                                        
entire cache, potentially leading to cache misses on subsequent queries which would have benefited from the                                                                                                                                                                                                                                                                                                                                                       
cache in the larger warehouse. The system is optimized for performance, and this eviction process is an                                                                                                                                                                                                                                                                                                                                                           
expected part of cache management. Options B, C, and D are incorrect. Option B is wrong as compute                                                                                                                                                                                                                                                                                                                                                                
resources are not entirely replaced; they are added or removed. Option C is wrong because the cache size is                                                                                                                                                                                                                                                                                                                                                       
dependent on the warehouse size and compute node allocation. Option D is incorrect because encryption keys                                                                                                                                                                                                                                                                                                                                                        
remain available even when resizing. This principle aligns with general caching behaviors in distributed                                                                                                                                                                                                                                                                                                                                                          
systems where cache eviction is necessary when capacity is limited.                                                                                                                                                                                                                                                                                                                                                                                               
https://docs.snowflake.com/en/user-guide/warehousesconsiderations.html#cachehttps://docs.snowflake.com/en/user-guide/querying-performance.html#queryresult-caching                                                                                                                                                                                                                                                                                                
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Which of the following statements describe features of Snowflake data caching? (Choose two.)                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. When a virtual warehouse is suspended, the data cache is saved on the remote storage layer.<br>B. When the data cache is full, the least-recently used data will be cleared to make room.<br>C. A user can only access their own queries from the query result cache.<br>D. A user must set USE_METADATA_CACHE to TRUE to use the metadata cache in queries.<br>E. The RESULT_SCAN table function can access and filter the contents of the query result cache.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>B, E</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Let's break down why options B and E are correct in the context of Snowflake's data caching mechanisms.                                                                                                                                                                                                                                                                                                                                                           
Option B: "When the data cache is full, the least-recently used data will be cleared to make room." This                                                                                                                                                                                                                                                                                                                                                          
statement accurately reflects how Snowflake manages its data cache. Like many caching systems, Snowflake                                                                                                                                                                                                                                                                                                                                                          
uses a Least Recently Used (LRU) eviction policy. This means that when the cache reaches its capacity, the                                                                                                                                                                                                                                                                                                                                                        
data that hasn't been accessed for the longest time is automatically removed (or "evicted") to create space                                                                                                                                                                                                                                                                                                                                                       
for new or more frequently used data. This ensures that the cache efficiently stores the most relevant and                                                                                                                                                                                                                                                                                                                                                        
actively accessed information, optimizing query performance by reducing the need to retrieve data from the                                                                                                                                                                                                                                                                                                                                                        
remote storage layer.                                                                                                                                                                                                                                                                                                                                                                                                                                             
Option E: "The RESULT_SCAN table function can access and filter the contents of the query result cache."                                                                                                                                                                                                                                                                                                                                                          
This is also correct. Snowflake’s query result cache stores the results of previous queries. The RESULT_SCAN                                                                                                                                                                                                                                                                                                                                                      
table function provides a mechanism to access and filter this cached data directly, without re-executing the                                                                                                                                                                                                                                                                                                                                                      
original query. This is extremely beneficial for performing iterative analysis, data transformations, or complex                                                                                                                                                                                                                                                                                                                                                  
operations based on prior query results, without incurring the processing cost of reading data from storage                                                                                                                                                                                                                                                                                                                                                       
and computing the results again. This ability to reuse cached results dramatically speeds up data analysis                                                                                                                                                                                                                                                                                                                                                        
workflows.                                                                                                                                                                                                                                                                                                                                                                                                                                                        
Here's why the other options are incorrect:                                                                                                                                                                                                                                                                                                                                                                                                                       
Option A: The data cache is not saved on the remote storage layer when a virtual warehouse is suspended.                                                                                                                                                                                                                                                                                                                                                          
Data caches are specific to a virtual warehouse and are lost when it is suspended. The persistent storage layer                                                                                                                                                                                                                                                                                                                                                   
holds the underlying data, while the caches are temporary copies within the warehouse nodes.                                                                                                                                                                                                                                                                                                                                                                      
Option C: The query result cache is not strictly user-specific. While Snowflake maintains security and access                                                                                                                                                                                                                                                                                                                                                     
control, the result cache is available across all user queries against the same data, warehouse and query.                                                                                                                                                                                                                                                                                                                                                        
Option D: The USE_METADATA_CACHE parameter is not necessary to enable the metadata cache. The                                                                                                                                                                                                                                                                                                                                                                     
metadata cache is automatically managed by Snowflake to optimize performance. There is no user setting to                                                                                                                                                                                                                                                                                                                                                         
control its use, and enabling it is not required for it to function in queries.                                                                                                                                                                                                                                                                                                                                                                                   
In summary: Snowflake's data caching utilizes an LRU eviction policy (B) and offers a mechanism to access                                                                                                                                                                                                                                                                                                                                                         
and filter query results through RESULT_SCAN (E), enhancing performance and efficiency by avoiding                                                                                                                                                                                                                                                                                                                                                                
redundant data retrieval and computation. The other options misrepresent Snowflake's cache behavior.                                                                                                                                                                                                                                                                                                                                                              
Authoritative Links:                                                                                                                                                                                                                                                                                                                                                                                                                                              
Snowflake Data Caching                                                                                                                                                                                                                                                                                                                                                                                                                                            
RESULT_SCAN Table Function                                                                                                                                                                                                                                                                                                                                                                                                                                        
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What affects whether the query results cache can be used?                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. If the query contains a deterministic function<br>B. If the virtual warehouse has been suspended<br>C. If the referenced data in the table has changed<br>D. If multiple users are using the same virtual warehouse                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>C</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is C. If the referenced data in the table has changed. Snowflake's query result cache is                                                                                                                                                                                                                                                                                                                                                       
designed to store results of queries for a period of time, allowing subsequent identical queries to return                                                                                                                                                                                                                                                                                                                                                        
results instantly without re-executing the query against the data. However, the cache's validity is dependent                                                                                                                                                                                                                                                                                                                                                     
on the consistency of the underlying data. If the data in the tables referenced by a query has changed since                                                                                                                                                                                                                                                                                                                                                      
the cache was last populated, the cached results are no longer accurate and cannot be used. Snowflake will                                                                                                                                                                                                                                                                                                                                                        
therefore bypass the cache and re-execute the query to obtain fresh results. This ensures data consistency                                                                                                                                                                                                                                                                                                                                                        
and correctness. A deterministic function (option A) will not prevent the cache from being used, as                                                                                                                                                                                                                                                                                                                                                               
deterministic functions always produce the same output for the same input. A suspended virtual warehouse                                                                                                                                                                                                                                                                                                                                                          
(option B) affects processing availability but does not directly invalidate the cache. Multiple users on the same                                                                                                                                                                                                                                                                                                                                                 
virtual warehouse (option D) do not inherently prevent cache usage, as the cache is primarily based on the                                                                                                                                                                                                                                                                                                                                                        
query and the underlying data. The primary determinant of cache usage is the freshness of the data. Changes                                                                                                                                                                                                                                                                                                                                                       
in the table necessitate a fresh query execution.                                                                                                                                                                                                                                                                                                                                                                                                                 
For more information on Snowflake's query caching, refer to the official documentation:                                                                                                                                                                                                                                                                                                                                                                           
https://docs.snowflake.com/en/user-guide/querying-cache.html                                                                                                                                                                                                                                                                                                                                                                                                      
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What actions will prevent leveraging of the ResultSet cache? (Choose two.)                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. Removing a column from the query SELECT list<br>B. Stopping the virtual warehouse that the query is running against<br>C. Clustering of the data used by the query<br>D. Executing the RESULTS_SCAN() table function<br>E. Changing a column that is not in the cached query                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A, E</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is A and E. Here's a detailed justification:                                                                                                                                                                                                                                                                                                                                                                                                   
The Snowflake ResultSet cache stores the results of queries for a period (typically 24 hours) and reuses them                                                                                                                                                                                                                                                                                                                                                     
when an identical query is submitted. Any change to the query's structure will invalidate the cache.                                                                                                                                                                                                                                                                                                                                                              
Option A: Removing a column from the query SELECT list: This action directly alters the query's structure.                                                                                                                                                                                                                                                                                                                                                        
The ResultSet cache stores the complete result set based on the original query's exact SELECT list. Removing                                                                                                                                                                                                                                                                                                                                                      
a column means the current query is no longer identical to the cached query, forcing Snowflake to re-execute                                                                                                                                                                                                                                                                                                                                                      
the query. Thus, preventing leveraging the ResultSet cache.                                                                                                                                                                                                                                                                                                                                                                                                       
Option E: Changing a column that is not in the cached query: If you change data within a column that isn't                                                                                                                                                                                                                                                                                                                                                        
part of the original query's SELECT list (i.e., not displayed in the results), the ResultSet cache will not be                                                                                                                                                                                                                                                                                                                                                    
invalidated. The ResultSet cache operates based on the query's text and the data required to produce that                                                                                                                                                                                                                                                                                                                                                         
specific result set. Therefore, changing a non-selected column will not prevent the result set cache from                                                                                                                                                                                                                                                                                                                                                         
being leveraged. However, if the changed column is part of the cached query, then it will prevent the                                                                                                                                                                                                                                                                                                                                                             
ResultSet cache from being leveraged.                                                                                                                                                                                                                                                                                                                                                                                                                             
Why other options are incorrect:                                                                                                                                                                                                                                                                                                                                                                                                                                  
Option B: Stopping the virtual warehouse that the query is running against: Stopping the virtual warehouse                                                                                                                                                                                                                                                                                                                                                        
suspends compute resources but doesn't invalidate the ResultSet cache itself. The cache is associated with                                                                                                                                                                                                                                                                                                                                                        
the Snowflake account, not a specific warehouse. The cache will be available once a warehouse is resumed                                                                                                                                                                                                                                                                                                                                                          
and if a matching query is executed.                                                                                                                                                                                                                                                                                                                                                                                                                              
Option C: Clustering of the data used by the query: Clustering aims to improve query performance through                                                                                                                                                                                                                                                                                                                                                          
data organization but does not inherently affect the ResultSet cache. Clustering optimizes data storage and                                                                                                                                                                                                                                                                                                                                                       
retrieval, enabling quicker query execution when the cache isn't used, but it won't prevent the cache from                                                                                                                                                                                                                                                                                                                                                        
being leveraged if a matching query is run after clustering.                                                                                                                                                                                                                                                                                                                                                                                                      
Option D: Executing the RESULTS_SCAN() table function: The RESULTS_SCAN() function retrieves the                                                                                                                                                                                                                                                                                                                                                                  
results of a previous query. This directly uses the ResultSet cache when available, actively leveraging it, not                                                                                                                                                                                                                                                                                                                                                   
preventing its use.                                                                                                                                                                                                                                                                                                                                                                                                                                               
In summary: Any change that makes the new query structurally different from the cached query (such as                                                                                                                                                                                                                                                                                                                                                             
altering the SELECT list) will prevent the ResultSet cache from being used. Modifying underlying data (when                                                                                                                                                                                                                                                                                                                                                       
not selected by a query), changing warehouses or clustering do not invalidate the ResultSet cache.                                                                                                                                                                                                                                                                                                                                                                
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
When is the result set cache no longer available? (Choose two.)                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. When another warehouse is used to execute the query<br>B. When another user executes the query<br>C. When the underlying data has changed<br>D. When the warehouse used to execute the query is suspended<br>E. When it has been 24 hours since the last query                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>C, E</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is C and E.                                                                                                                                                                                                                                                                                                                                                                                                                                    
The result set cache in Snowflake is a powerful feature that significantly improves query performance by                                                                                                                                                                                                                                                                                                                                                          
storing the results of a query and serving them directly from the cache if the query is executed again without                                                                                                                                                                                                                                                                                                                                                    
any changes. However, the availability of the result set cache is dependent on certain conditions.                                                                                                                                                                                                                                                                                                                                                                
Option C is correct because the result set cache is invalidated when the underlying data has changed.                                                                                                                                                                                                                                                                                                                                                             
Snowflake automatically detects data modifications (inserts, updates, deletes) in the tables involved in the                                                                                                                                                                                                                                                                                                                                                      
query. If the data has been modified since the query was last executed and stored in the cache, the cache is                                                                                                                                                                                                                                                                                                                                                      
considered stale and the query must be re-executed against the actual data to ensure accurate results. This                                                                                                                                                                                                                                                                                                                                                       
ensures data consistency.                                                                                                                                                                                                                                                                                                                                                                                                                                         
Option E is also correct. Snowflake's result set cache persists for 24 hours from the last time the query was                                                                                                                                                                                                                                                                                                                                                     
executed. After this period, the cache is considered expired and the query will need to be re-executed. This is                                                                                                                                                                                                                                                                                                                                                   
a built-in mechanism to prevent the cache from holding outdated data indefinitely, even if the underlying data                                                                                                                                                                                                                                                                                                                                                    
hasn't changed. This helps with the validity of the data returned.                                                                                                                                                                                                                                                                                                                                                                                                
Option A is incorrect because the result set cache can be used across warehouses if they are the same size                                                                                                                                                                                                                                                                                                                                                        
and configuration. If the virtual warehouse is the same, the result set cache is available.                                                                                                                                                                                                                                                                                                                                                                       
Option B is incorrect, as the result set cache is available to other users if they execute the identical query.                                                                                                                                                                                                                                                                                                                                                   
Option D is incorrect because suspending a virtual warehouse does not invalidate the result cache as long as                                                                                                                                                                                                                                                                                                                                                      
the data does not change and the 24 hour period has not passed. Restarting the virtual warehouse would have                                                                                                                                                                                                                                                                                                                                                       
no affect on the cache.                                                                                                                                                                                                                                                                                                                                                                                                                                           
Here are some authoritative links for further research:                                                                                                                                                                                                                                                                                                                                                                                                           
Snowflake Documentation - Using Result Cache: https://docs.snowflake.com/en/user-guide/querying-usingcache.html                                                                                                                                                                                                                                                                                                                                                   
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Which cache type is used to cache data output from SQL queries?                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. Metadata cache<br>B. Result cache<br>C. Remote cache<br>D. Local file cache                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>B</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is B. Result cache. Here's a detailed justification:                                                                                                                                                                                                                                                                                                                                                                                           
Snowflake employs several caching layers to optimize query performance and reduce costs. The most                                                                                                                                                                                                                                                                                                                                                                 
relevant cache for storing the output of SQL queries is the Result Cache. This cache stores the results of                                                                                                                                                                                                                                                                                                                                                        
queries, allowing Snowflake to return the same results instantly if the same query is executed again, provided                                                                                                                                                                                                                                                                                                                                                    
the underlying data hasn't changed and the user has the appropriate permissions.                                                                                                                                                                                                                                                                                                                                                                                  
The result cache is maintained at the global services layer, separate from the virtual warehouses. This means                                                                                                                                                                                                                                                                                                                                                     
that the results are available regardless of which virtual warehouse is used to execute the query, or whether                                                                                                                                                                                                                                                                                                                                                     
the same warehouse is used at all. This is a crucial distinction, as it ensures quick retrieval of common query                                                                                                                                                                                                                                                                                                                                                   
results without consuming warehouse compute resources.                                                                                                                                                                                                                                                                                                                                                                                                            
Metadata cache stores metadata information, such as table definitions and statistics, not query results. Local                                                                                                                                                                                                                                                                                                                                                    
file cache isn't directly relevant to Snowflake's internal caching mechanisms as it is more aligned with clientside operations. Remote cache is a generic term and doesn't pinpoint Snowflake's specific architecture.                                                                                                                                                                                                                                            
Result cache usage is automatic. Snowflake handles the process transparently, analyzing incoming queries                                                                                                                                                                                                                                                                                                                                                          
and comparing them to previous queries in the result cache. There is no explicit configuration needed to                                                                                                                                                                                                                                                                                                                                                          
enable or disable result caching at a user level.                                                                                                                                                                                                                                                                                                                                                                                                                 
Crucially, the query must be identical (including whitespace and capitalization, although Snowflake can do                                                                                                                                                                                                                                                                                                                                                        
case-insensitive matching). Also, the underlying data for the query hasn't changed. This is determined via a                                                                                                                                                                                                                                                                                                                                                      
change detection mechanism. If the data has been modified, then the result cache is automatically invalidated                                                                                                                                                                                                                                                                                                                                                     
and the query runs against the current data in the tables or views. This ensures consistency, and the cost for                                                                                                                                                                                                                                                                                                                                                    
the query is then charged to the virtual warehouse.                                                                                                                                                                                                                                                                                                                                                                                                               
To reiterate: storing output of queries is the function of the result cache within the Snowflake Architecture.                                                                                                                                                                                                                                                                                                                                                    
The other answer options, though relevant to other facets of data processing, are not the caches employed for                                                                                                                                                                                                                                                                                                                                                     
storing the results of SQL queries.                                                                                                                                                                                                                                                                                                                                                                                                                               
Relevant Documentation:Snowflake Caching: https://docs.snowflake.com/en/user-guide/querying-persisted-results.html                                                                                                                                                                                                                                                                                                                                                
Snowflake Caching Layers: https://docs.snowflake.com/en/user-guide/performance-optimizationconsiderations.html                                                                                                                                                                                                                                                                                                                                                    
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What actions will prevent leveraging of the ResultSet cache?                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. Removing a column from the query SELECT list<br>B. Stopping the virtual warehouse that the query is running against<br>C. If the result has not been reused within the last 12 hours<br>D. Executing the RESULTS_SCAN() table function                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is A. Removing a column from the SELECT list of a query will prevent leveraging the                                                                                                                                                                                                                                                                                                                                                            
ResultSet cache.                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Here's why: The ResultSet cache stores the result of a query based on its precise query text and underlying                                                                                                                                                                                                                                                                                                                                                       
data. Any modification to the query, even something as seemingly minor as removing a column, is treated as a                                                                                                                                                                                                                                                                                                                                                      
distinct query by Snowflake. Therefore, Snowflake will not recognize the changed query as identical to a                                                                                                                                                                                                                                                                                                                                                          
previously executed query, and the cached results will not be used. Instead, the query will be re-executed,                                                                                                                                                                                                                                                                                                                                                       
and a new result set will be generated.                                                                                                                                                                                                                                                                                                                                                                                                                           
Option B is incorrect because stopping the virtual warehouse would clear its memory including any active                                                                                                                                                                                                                                                                                                                                                          
cache, but this does not directly prevent future use of the result set cache, it only clears the active one. Next                                                                                                                                                                                                                                                                                                                                                 
time the same query is executed (without modifications), and the cache is enabled, it could potentially                                                                                                                                                                                                                                                                                                                                                           
leverage the ResultSet cache.                                                                                                                                                                                                                                                                                                                                                                                                                                     
Option C is technically correct in that if a result has not been reused within 24 hours (not 12), it is evicted from                                                                                                                                                                                                                                                                                                                                              
the ResultSet cache. However, this describes a natural consequence of the cache's lifespan, not an action                                                                                                                                                                                                                                                                                                                                                         
that prevents the cache from being leveraged in the first place. A query result can still leverage the cache                                                                                                                                                                                                                                                                                                                                                      
within that 24-hour window.                                                                                                                                                                                                                                                                                                                                                                                                                                       
Option D is incorrect. RESULTS_SCAN() retrieves results from the query result cache, rather than preventing                                                                                                                                                                                                                                                                                                                                                       
it from being used. In fact, its purpose is to explicitly utilize and access the ResultSet cache.                                                                                                                                                                                                                                                                                                                                                                 
In summary, the ResultSet cache relies on the exact query text. Changing the SELECT statement by removing                                                                                                                                                                                                                                                                                                                                                         
a column constitutes a different query, rendering the previous cache entry unusable.                                                                                                                                                                                                                                                                                                                                                                              
Reference:                                                                                                                                                                                                                                                                                                                                                                                                                                                        
[Snowflake Caching Layers](https://docs.snowflake.com/en/user-guide/ Warehouses - caching#resultcaching): Explains Snowflake's caching mechanisms and how query results are stored.                                                                                                                                                                                                                                                                               
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Which of the following conditions must be met in order to return results from the results cache? (Choose two.)                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. The user has the appropriate privileges on the objects associated with the query.<br>B. Micro-partitions have been reclustered since the query was last run.<br>C. The new query is run using the same virtual warehouse as the previous query.<br>D. The query includes a User Defined Function (UDF).<br>E. The query has been run within 24 hours of the previously-run query.                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A, E</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is A and E. Snowflake's result cache is designed to accelerate query performance by                                                                                                                                                                                                                                                                                                                                                            
storing the results of queries. For results to be retrieved from this cache, specific conditions must be met.                                                                                                                                                                                                                                                                                                                                                     
Option A is correct because the user executing the query must have the necessary privileges to access the                                                                                                                                                                                                                                                                                                                                                         
underlying tables and objects referenced in the query. This ensures data security and access control. If                                                                                                                                                                                                                                                                                                                                                          
privileges are different, the cached results are invalidated, forcing the query to be executed anew. Option E is                                                                                                                                                                                                                                                                                                                                                  
also correct. Snowflake retains cached results for 24 hours. If the same query is executed within this                                                                                                                                                                                                                                                                                                                                                            
timeframe and other conditions are met, it can directly retrieve results from the cache, drastically reducing                                                                                                                                                                                                                                                                                                                                                     
processing time and resource consumption.                                                                                                                                                                                                                                                                                                                                                                                                                         
Option B is incorrect as reclustering of micro-partitions doesn't invalidate results in the cache. The cache                                                                                                                                                                                                                                                                                                                                                      
stores results based on query text and data states, not physical storage changes, thus the cache remains                                                                                                                                                                                                                                                                                                                                                          
viable. Option C is incorrect because cached results are available across all virtual warehouses as long as all                                                                                                                                                                                                                                                                                                                                                   
other conditions are met. The result cache is not warehouse specific. Option D is also incorrect; UDFs can be                                                                                                                                                                                                                                                                                                                                                     
used in queries that are eligible for caching. The presence of a UDF doesn’t automatically invalidate the                                                                                                                                                                                                                                                                                                                                                         
cache, assuming the UDF’s logic and referenced data remain the same, ensuring consistent results.                                                                                                                                                                                                                                                                                                                                                                 
Therefore, user privilege and the 24-hour timeframe are crucial aspects of the result cache functionality in                                                                                                                                                                                                                                                                                                                                                      
Snowflake.[Authoritative links]:Snowflake Caching:https://docs.snowflake.com/en/user-guide/queryingcached-dataSnowflake Result Caching:https://docs.snowflake.com/en/user-guide/performance-queryprofiling#result-caching                                                                                                                                                                                                                                         
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
A Snowflake user executed a query and received the results. Another user executed the same query 4 hours later.                                                                                                                                                                                                                                                                                                                                                   
The data had not changed.                                                                                                                                                                                                                                                                                                                                                                                                                                         
What will occur?                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. No virtual warehouse will be used, data will be read from the result cache.<br>B. No virtual warehouse will be used, data will be read from the local disk cache.<br>C. The default virtual warehouse will be used to read all data.<br>D. The virtual warehouse that is defined at the session level will be used to read all data.                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Here's a detailed justification for why option A is the correct answer, along with supporting concepts and                                                                                                                                                                                                                                                                                                                                                        
links:                                                                                                                                                                                                                                                                                                                                                                                                                                                            
The core principle at play here is Snowflake's result cache. Snowflake automatically caches the results of                                                                                                                                                                                                                                                                                                                                                        
queries for 24 hours. If the same query is executed again within that 24-hour window, and the underlying data                                                                                                                                                                                                                                                                                                                                                     
hasn't changed, Snowflake retrieves the results directly from the cache instead of re-executing the query.                                                                                                                                                                                                                                                                                                                                                        
This significantly improves performance and reduces costs.                                                                                                                                                                                                                                                                                                                                                                                                        
Because the second user executed the same query within 4 hours, and the data remained unchanged,                                                                                                                                                                                                                                                                                                                                                                  
Snowflake's query processor recognizes this. It short-circuits the query execution process. Instead of                                                                                                                                                                                                                                                                                                                                                            
spinning up a virtual warehouse and scanning the data again, it serves the results from the previously stored                                                                                                                                                                                                                                                                                                                                                     
result cache.                                                                                                                                                                                                                                                                                                                                                                                                                                                     
Option B is incorrect. While Snowflake utilizes local disk caching on the virtual warehouse nodes for                                                                                                                                                                                                                                                                                                                                                             
performance, the result cache is a separate and higher-level caching mechanism that takes precedence.                                                                                                                                                                                                                                                                                                                                                             
Options C and D are incorrect because the virtual warehouse isn't even engaged in this scenario. The query is                                                                                                                                                                                                                                                                                                                                                     
satisfied directly from the result cache, bypassing the need to allocate and utilize compute resources. This is                                                                                                                                                                                                                                                                                                                                                   
one of Snowflake's key optimization features. Result cache is per user per session. The result caches are                                                                                                                                                                                                                                                                                                                                                         
available across virtual warehouses.                                                                                                                                                                                                                                                                                                                                                                                                                              
The result cache is automatically invalidated if the underlying data changes through DML (insert, update,                                                                                                                                                                                                                                                                                                                                                         
delete) operations or DDL (table schema change). This ensures that users always receive consistent and upto-date results. Since the data hadn't changed in our scenario, the result cache remained valid.                                                                                                                                                                                                                                                         
Therefore, the most efficient and cost-effective action is for Snowflake to retrieve the results from the result                                                                                                                                                                                                                                                                                                                                                  
cache, making option A the correct answer. No virtual warehouse will be used, and the data will be read from                                                                                                                                                                                                                                                                                                                                                      
the result cache.                                                                                                                                                                                                                                                                                                                                                                                                                                                 
Here are some authoritative links for further research:                                                                                                                                                                                                                                                                                                                                                                                                           
Snowflake Documentation - Result Caching: https://docs.snowflake.com/en/user-guide/querying-persisteddata.html#result-caching                                                                                                                                                                                                                                                                                                                                     
Snowflake Performance Optimization: https://www.snowflake.com/blog/performance-tuning-queriessnowflake/                                                                                                                                                                                                                                                                                                                                                           
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What is cached during a query on a virtual warehouse?                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. All columns in a micro-partition<br>B. Any columns accessed during the query<br>C. The columns in the result set of the query<br>D. All rows accessed during the query                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>B</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is B: Any columns accessed during the query. Here's why:                                                                                                                                                                                                                                                                                                                                                                                       
Snowflake's virtual warehouse utilizes several caching layers to optimize query performance. When a query                                                                                                                                                                                                                                                                                                                                                         
executes, Snowflake identifies the micro-partitions containing the relevant data. Instead of loading the entire                                                                                                                                                                                                                                                                                                                                                   
micro-partition, Snowflake intelligently caches only the columns actually accessed during the query. This                                                                                                                                                                                                                                                                                                                                                         
selective caching, often called column pruning, significantly reduces I/O operations and memory usage,                                                                                                                                                                                                                                                                                                                                                            
leading to faster query execution.                                                                                                                                                                                                                                                                                                                                                                                                                                
Option A is incorrect because caching all columns in a micro-partition, regardless of whether they are used in                                                                                                                                                                                                                                                                                                                                                    
the query, would be inefficient and wasteful of resources.                                                                                                                                                                                                                                                                                                                                                                                                        
Option C is incorrect because only caching the result set would prevent subsequent queries accessing the                                                                                                                                                                                                                                                                                                                                                          
same columns from benefitting from the cached data. The result set is typically cached separately in the                                                                                                                                                                                                                                                                                                                                                          
query result cache.                                                                                                                                                                                                                                                                                                                                                                                                                                               
Option D is incorrect because while row filtering (also known as data pruning) is an optimization technique                                                                                                                                                                                                                                                                                                                                                       
employed to minimize the amount of data that is read from storage, it doesn't directly translate to caching "all                                                                                                                                                                                                                                                                                                                                                  
rows accessed." The cached data is organized by columns, not complete rows.                                                                                                                                                                                                                                                                                                                                                                                       
Therefore, the key concept is that Snowflake's virtual warehouse selectively caches only the specific columns                                                                                                                                                                                                                                                                                                                                                     
needed for a query from relevant micro-partitions, optimizing for performance and cost.                                                                                                                                                                                                                                                                                                                                                                           
Further Research:                                                                                                                                                                                                                                                                                                                                                                                                                                                 
Snowflake Documentation - Understanding the Snowflake Architecture:                                                                                                                                                                                                                                                                                                                                                                                               
https://docs.snowflake.com/en/user-guide/intro-key-concepts.html                                                                                                                                                                                                                                                                                                                                                                                                  
Snowflake Documentation - Data Caching: Search within the Snowflake Documentation for "Data Caching"                                                                                                                                                                                                                                                                                                                                                              
to find the most relevant and up-to-date information on how data caching works.                                                                                                                                                                                                                                                                                                                                                                                   
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What is required for a query execution to be served from the result cache?                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. The user is the same.<br>B. The SQL texts the same.<br>C. The SQL query profile is the same.<br>D. The virtual warehouse is the same.                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>B</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is B. The SQL text is the same. Snowflake's result cache significantly improves query                                                                                                                                                                                                                                                                                                                                                          
performance by storing the output of queries. For a query execution to utilize the result cache, the submitted                                                                                                                                                                                                                                                                                                                                                    
SQL text must be identical to a previously executed query that has a cached result. This means that even                                                                                                                                                                                                                                                                                                                                                          
minor variations like whitespace changes, capitalization differences, or the inclusion of comments will prevent                                                                                                                                                                                                                                                                                                                                                   
a cache hit. The comparison of the SQL text is done on a character-by-character basis. The user executing the                                                                                                                                                                                                                                                                                                                                                     
query, the query profile, or the virtual warehouse used are not factors that influence whether the result cache                                                                                                                                                                                                                                                                                                                                                   
is used. If the SQL text exactly matches a previously executed query and the data underlying those results                                                                                                                                                                                                                                                                                                                                                        
hasn't changed, the results are retrieved directly from the cache. This bypasses the need for a full query                                                                                                                                                                                                                                                                                                                                                        
execution, saving computation time and resources. The result cache is maintained at a global level across the                                                                                                                                                                                                                                                                                                                                                     
entire Snowflake account and is not tied to a specific user, warehouse, or session. Therefore, while factors like                                                                                                                                                                                                                                                                                                                                                 
the user and warehouse can impact performance generally, they don't play a role in the utilization of the                                                                                                                                                                                                                                                                                                                                                         
result cache. This behavior underscores the importance of writing SQL queries consistently to maximize the                                                                                                                                                                                                                                                                                                                                                        
benefits of result caching.                                                                                                                                                                                                                                                                                                                                                                                                                                       
Authoritative Links for Further Research:                                                                                                                                                                                                                                                                                                                                                                                                                         
Snowflake Documentation: Result Cache: https://docs.snowflake.com/en/user-guide/queryingoptimization.html#result-caching                                                                                                                                                                                                                                                                                                                                          
Snowflake Documentation: Caching Layers: https://docs.snowflake.com/en/user-guide/queryingoptimization.html                                                                                                                                                                                                                                                                                                                                                       
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Which clients does Snowflake support Multi-Factor Authentication (MFA) token caching for? (Choose two.)                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. GO driver<br>B. Node.js driver<br>C. ODBC driver<br>D. Python connector<br>E. Spark connector                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>C, D</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Snowflake supports Multi-Factor Authentication (MFA) token caching to reduce the frequency of MFA                                                                                                                                                                                                                                                                                                                                                                 
prompts for users, enhancing usability and efficiency. This caching mechanism is primarily implementedwithin specific client drivers that interact directly with the Snowflake service. The ODBC driver (Option C) and                                                                                                                                                                                                                                            
the Python connector (Option D) are two such clients that actively support and utilize MFA token caching.                                                                                                                                                                                                                                                                                                                                                         
These clients, when configured appropriately, will store the authentication token after a successful MFA                                                                                                                                                                                                                                                                                                                                                          
challenge, allowing subsequent requests within a specified timeframe to bypass the MFA step. This feature                                                                                                                                                                                                                                                                                                                                                         
streamlines the user experience by avoiding redundant authentication prompts while maintaining a high level                                                                                                                                                                                                                                                                                                                                                       
of security. The caching mechanisms are typically managed within the respective drivers and can often be                                                                                                                                                                                                                                                                                                                                                          
configured or adjusted by users through client configuration settings or connection parameters. Client drivers                                                                                                                                                                                                                                                                                                                                                    
such as GO, Node.js, and Spark drivers do not currently have built-in token caching support for MFA and                                                                                                                                                                                                                                                                                                                                                           
therefore will not be used for token caching.                                                                                                                                                                                                                                                                                                                                                                                                                     
Supporting Links:                                                                                                                                                                                                                                                                                                                                                                                                                                                 
Snowflake Documentation on MFA and Caching: While a direct link to a specific page detailing token caching                                                                                                                                                                                                                                                                                                                                                        
for each driver isn't always provided in a single document, searching the Snowflake documentation using                                                                                                                                                                                                                                                                                                                                                           
keywords like "MFA," "token caching," and specific driver names (e.g., "ODBC token caching") will lead to                                                                                                                                                                                                                                                                                                                                                         
relevant articles. Start with the Snowflake Security documentation: https://docs.snowflake.com/en/userguide/security-overview.html                                                                                                                                                                                                                                                                                                                                
Snowflake ODBC Driver Documentation: This will specify the parameters and configuration to enable MFA                                                                                                                                                                                                                                                                                                                                                             
token caching. Refer to the specific ODBC driver documentation provided by Snowflake for the relevant                                                                                                                                                                                                                                                                                                                                                             
caching settings.                                                                                                                                                                                                                                                                                                                                                                                                                                                 
Snowflake Python Connector Documentation: Look for details on MFA configuration and token caching                                                                                                                                                                                                                                                                                                                                                                 
within the Snowflake Python connector's official documentation.                                                                                                                                                                                                                                                                                                                                                                                                   
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What does the “percentage scanned from cache” represent in the Query Profile?                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. The percentage of data scanned from the query cache<br>B. The percentage of data scanned from the result cache<br>C. The percentage of data scanned from the remote disk cache<br>D. The percentage of data scanned from the local disk cache                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>D</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is D, the percentage of data scanned from the local disk cache. In Snowflake's                                                                                                                                                                                                                                                                                                                                                                 
query processing, data retrieval involves multiple layers of caching to optimize performance. The                                                                                                                                                                                                                                                                                                                                                                 
"percentage scanned from cache" metric specifically refers to the local disk cache, also known as                                                                                                                                                                                                                                                                                                                                                                 
the data cache or warehouse cache. This cache resides on the compute nodes within the virtual                                                                                                                                                                                                                                                                                                                                                                     
warehouse. When Snowflake executes a query, it first checks the local disk cache for the required                                                                                                                                                                                                                                                                                                                                                                 
data blocks. If found, these blocks are retrieved very quickly, avoiding expensive reads from                                                                                                                                                                                                                                                                                                                                                                     
remote storage. A high percentage here means the query benefited significantly from local                                                                                                                                                                                                                                                                                                                                                                         
caching, resulting in faster execution and reduced costs. Options A and B are incorrect; the query                                                                                                                                                                                                                                                                                                                                                                
cache stores full query results, while the result cache holds the processed output. The metric in                                                                                                                                                                                                                                                                                                                                                                 
question deals with the intermediary data retrieval, not the final result or query definition. Option                                                                                                                                                                                                                                                                                                                                                             
C refers to data that's generally not a part of the warehouse itself, but rather the data stored in                                                                                                                                                                                                                                                                                                                                                               
remote S3. When the local cache doesn't have the requested data, a query goes to Snowflake's                                                                                                                                                                                                                                                                                                                                                                      
storage layer and it will retrieve data from S3 (remote). Thus, when we talk about cache, the                                                                                                                                                                                                                                                                                                                                                                     
"percentage scanned from cache" always points to local disk cache. The data cache is a key                                                                                                                                                                                                                                                                                                                                                                        
optimization feature of Snowflake, contributing to its performance and efficiency.Here's more                                                                                                                                                                                                                                                                                                                                                                     
about Snowflake's architecture:                                                                                                                                                                                                                                                                                                                                                                                                                                   
Caching Layers: https://docs.snowflake.com/en/user-guide/querying-performance.html#cachinglayers                                                                                                                                                                                                                                                                                                                                                                  
Query Profile: https://docs.snowflake.com/en/sql-reference/sql/explain                                                                                                                                                                                                                                                                                                                                                                                            
Snowflake Architecture: https://docs.snowflake.com/en/user-guide/intro-keyconcepts.html#snowflake-architecture                                                                                                                                                                                                                                                                                                                                                    
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
What is used during the FIRST execution of SELECT COUNT(*) FROM ORDER?                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. Remote disk cache<br>B. Virtual warehouse cache<br>C. Cache result<br>D. Metadata-based result                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>D</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is D, Metadata-based result. Here's why:                                                                                                                                                                                                                                                                                                                                                                                                       
When a SELECT COUNT(*) query is executed for the very first time against a table, Snowflake                                                                                                                                                                                                                                                                                                                                                                       
leverages its metadata layer to retrieve the count, rather than scanning the entire table's data.                                                                                                                                                                                                                                                                                                                                                                 
Snowflake maintains rich metadata about its tables, including row counts, which is updated as                                                                                                                                                                                                                                                                                                                                                                     
data is loaded or modified. Because of this pre-existing, accessible metadata, a full table scan and                                                                                                                                                                                                                                                                                                                                                              
complex computation are avoided during the initial execution of such a simple count query.                                                                                                                                                                                                                                                                                                                                                                        
The virtual warehouse cache (option B) is not used in this first execution. The warehouse cache                                                                                                                                                                                                                                                                                                                                                                   
stores results of previous query executions at the virtual warehouse level, however, there are no                                                                                                                                                                                                                                                                                                                                                                 
prior results to access the first time a query is executed. Therefore, no cache hits or retrieval from                                                                                                                                                                                                                                                                                                                                                            
cache happen initially.                                                                                                                                                                                                                                                                                                                                                                                                                                           
Remote disk cache (option A) also won't be used for this type of operation, as that cache is mainlyused for retrieving micro-partitions that actually make up a table, which is not needed when                                                                                                                                                                                                                                                                   
simply retrieving a count of all rows from the metadata.                                                                                                                                                                                                                                                                                                                                                                                                          
Option C, "cache result" is too broad, as it does not specify which cache is being used. Moreover, it                                                                                                                                                                                                                                                                                                                                                             
could refer to either the virtual warehouse or other internal caches, which are not used during the                                                                                                                                                                                                                                                                                                                                                               
first execution.                                                                                                                                                                                                                                                                                                                                                                                                                                                  
In summary, Snowflake intelligently uses its metadata to provide a quick row count response                                                                                                                                                                                                                                                                                                                                                                       
during the first execution of SELECT COUNT(*) queries. This metadata-driven approach                                                                                                                                                                                                                                                                                                                                                                              
significantly improves performance and reduces resource consumption.                                                                                                                                                                                                                                                                                                                                                                                              
Authoritative links for further research:                                                                                                                                                                                                                                                                                                                                                                                                                         
1. Snowflake Documentation on Metadata: https://docs.snowflake.com/en/userguide/data-load-metadata.html (Focus on how Snowflake uses metadata to manage                                                                                                                                                                                                                                                                                                           
data)                                                                                                                                                                                                                                                                                                                                                                                                                                                             
2. Snowflake Documentation on Query Caching: https://docs.snowflake.com/en/userguide/querying-cached-data.html (To better understand when query cache is actually                                                                                                                                                                                                                                                                                                 
used)                                                                                                                                                                                                                                                                                                                                                                                                                                                             
3. Snowflake Blog Post on Performance: (Search on snowflake.com's blog for articles on                                                                                                                                                                                                                                                                                                                                                                            
performance optimization, often these posts delve into how the metadata is used)                                                                                                                                                                                                                                                                                                                                                                                  
These resources should help further clarify the process by which Snowflake uses metadata to                                                                                                                                                                                                                                                                                                                                                                       
accelerate certain queries, particularly initial queries such as SELECT COUNT(*).                                                                                                                                                                                                                                                                                                                                                                                 
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
If a virtual warehouse is suspended, what happens to the warehouse cache?                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. The cache is dropped when the warehouse is suspended and is no longer available upon restart.<br>B. The warehouse cache persists for as long as the warehouse exists, regardless of its suspension status.<br>C. The cache is maintained for up to two hours and can be restored if the warehouse is restarted within this limit.<br>D. The cache is maintained for the auto_suspend duration and can be restored if the warehouse is restarted                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>A</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The correct answer is A. The cache is dropped when the warehouse is suspended and is no longer                                                                                                                                                                                                                                                                                                                                                                    
available upon restart. When a Snowflake virtual warehouse is suspended, all compute resources                                                                                                                                                                                                                                                                                                                                                                    
associated with it are released, including the local disk cache. This cache, which stores recently                                                                                                                                                                                                                                                                                                                                                                
accessed data to improve query performance, is tied to the active compute nodes. Upon                                                                                                                                                                                                                                                                                                                                                                             
suspension, these compute nodes are shut down, and consequently, their memory and storage,                                                                                                                                                                                                                                                                                                                                                                        
including the cache, are deallocated. When the warehouse is resumed, a new set of compute                                                                                                                                                                                                                                                                                                                                                                         
nodes are provisioned, which start with an empty cache. This means that queries executed                                                                                                                                                                                                                                                                                                                                                                          
immediately after resuming a warehouse will not benefit from any pre-existing cached data and                                                                                                                                                                                                                                                                                                                                                                     
may experience a performance lag until the cache is repopulated. This design ensures cost                                                                                                                                                                                                                                                                                                                                                                         
efficiency as compute resources, and their associated storage, are only consumed when the                                                                                                                                                                                                                                                                                                                                                                         
warehouse is actively processing queries. The nature of ephemeral resources in cloud computing                                                                                                                                                                                                                                                                                                                                                                    
dictates that data stored in compute instance-specific storage is typically lost when the instance                                                                                                                                                                                                                                                                                                                                                                
terminates. Therefore, understanding that warehouse suspension leads to cache clearing is                                                                                                                                                                                                                                                                                                                                                                         
crucial for performance optimization and cost management. Snowflake's architecture is designed                                                                                                                                                                                                                                                                                                                                                                    
to balance performance and cost, with the trade-off being that cache is ephemeral and lost upon                                                                                                                                                                                                                                                                                                                                                                   
suspension. This aligns with the common practice in cloud services where resources are                                                                                                                                                                                                                                                                                                                                                                            
dynamically allocated and deallocated as needed. You can find more information on Snowflake's                                                                                                                                                                                                                                                                                                                                                                     
caching behavior in their official documentation: https://docs.snowflake.com/en/userguide/querying-performance and https://docs.snowflake.com/en/user-guide/warehousesoverview.                                                                                                                                                                                                                                                                                   
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
---                                                                                                                                                                                                                                                                                                                                                                                                                                                               
Where does Snowflake store the data output from a query that was executed in the past 24 hours?                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
A. In a micro-partition<br>B. In a remote disk<br>C. In the result cache layer<br>D. In the local disk cache layer                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
<details>                                                                                                                                                                                                                                                                                                                                                                                                                                                         
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                                                                                                                                                                                                                                                                  
<strong>C</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
The Correct answer is ["C"]                                                                                                                                                                                                                                                                                                                                                                                                                                       
</details>                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
