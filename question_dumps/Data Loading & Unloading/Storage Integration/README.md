# Storage Integration                                                                                                                                                                                                  
Which URL type allows users to access unstructured data without authenticating into Snowflake or passing an                                                                                                            
authorization token?                                                                                                                                                                                                   
                                                                                                                                                                                                                       
A. Pre-signed URL<br>B. Scoped URL<br>C. Signed URL<br>D. File URL                                                                                                                                                     
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>A</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
The correct answer is A, Pre-signed URL. Pre-signed URLs offer a way to grant temporary, limited access to                                                                                                             
objects in cloud storage, like those used by Snowflake, without requiring users to authenticate directly with                                                                                                          
Snowflake or provide authorization tokens. These URLs are generated by a user who does have appropriate                                                                                                                
permissions, encoding those permissions within the URL itself. When a user accesses the object using a presigned URL, the cloud storage service verifies the embedded permissions and time limit without relying on    
explicit Snowflake user credentials. In essence, a pre-signed URL contains the authorization information                                                                                                               
directly within its structure, effectively bypassing the normal authentication process. This is particularly                                                                                                           
useful for sharing access to data with external parties or for scenarios where direct Snowflake authentication                                                                                                         
is not feasible or desired. Scoped URLs, signed URLs, and file URLs do not offer the same level of                                                                                                                     
authentication bypass, generally requiring authorization tokens or relying on pre-existing Snowflake access.                                                                                                           
Pre-signed URLs are an established cloud storage access mechanism, not unique to Snowflake, making them                                                                                                                
a common choice for temporary sharing purposes.                                                                                                                                                                        
Further Research:                                                                                                                                                                                                      
AWS Pre-Signed URLs:                                                                                                                                                                                                   
https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html                                                                                                                                     
Azure Shared Access Signatures (SAS): https://learn.microsoft.com/en-us/azure/storage/common/storagesas-overview - Note that SAS, while not a direct "pre-signed URL" is the equivalent concept in Azure.              
Google Cloud Storage Signed URLs: https://cloud.google.com/storage/docs/access-control/signed-urls                                                                                                                     
Snowflake external stage documentation (relevant concept): While not directly defining a pre-signed URL,                                                                                                               
the concept of using them with external stages is covered in Snowflake documentation. Search "pre-signed                                                                                                               
URL" within the Snowflake documentation.                                                                                                                                                                               
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
---                                                                                                                                                                                                                    
What is the expiration period for a file URL used to access unstructured data in cloud storage?                                                                                                                        
                                                                                                                                                                                                                       
A. The remainder of the session<br>B. An unlimited amount of time<br>C. The length of time specified in the expiration_time argument<br>D. The same length of time as the expiration period for the query results cache
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>B</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
The correct answer is B. An unlimited amount of time. Snowflake file URLs for accessing                                                                                                                                
unstructured data in cloud storage, generated using commands like GET_PRESIGNED_URL, do                                                                                                                                
not inherently have a time-based expiration. These URLs are essentially pre-signed URLs at the                                                                                                                         
cloud storage provider level (e.g., AWS S3, Azure Blob Storage, Google Cloud Storage) which                                                                                                                            
allow access to the underlying storage objects without further authorization from Snowflake. The                                                                                                                       
lifespan of the pre-signed URLs is entirely governed by the access policies and configurations set                                                                                                                     
directly on the cloud storage service itself and are independent of any Snowflake session or query                                                                                                                     
result caching periods. Snowflake acts as an intermediary that generates this URL, but it does not                                                                                                                     
dictate the expiration. The generated URL remains valid until revoked, or if the underlying cloud                                                                                                                      
storage bucket policies or object ACLs change. Snowflake does not impose a limitation unless                                                                                                                           
specifically controlled by the cloud storage service. Therefore, options A, C, and D are incorrect,                                                                                                                    
as they suggest that Snowflake has any control or limitation over the file URLs.                                                                                                                                       
Here are some helpful links:                                                                                                                                                                                           
Snowflake Documentation on GET_PRESIGNED_URL: https://docs.snowflake.com/en/sql-reference/functions/get_presigned_url - Note how it describes retrieving URLs without                                                  
mentioning an expiration time controlled by Snowflake.                                                                                                                                                                 
AWS S3 Pre-signed URLs:                                                                                                                                                                                                
https://docs.aws.amazon.com/AmazonS3/latest/userguide/PresignedUrlUploadObject.html - See                                                                                                                              
how AWS controls expiration independently of applications using them.                                                                                                                                                  
Azure Blob Storage SAS Tokens: https://learn.microsoft.com/enus/azure/storage/common/storage-sas-overview - Examine how Azure manages access tokens                                                                    
and expiration.                                                                                                                                                                                                        
Google Cloud Storage Signed URLs: https://cloud.google.com/storage/docs/accesscontrol/signed-urls - Understand Google's approach to access controls for its storage service.                                           
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
---                                                                                                                                                                                                                    
How long can a data consumer who has a pre-signed URL access data files using Snowflake?                                                                                                                               
                                                                                                                                                                                                                       
A. Indefinitely<br>B. Until the result_cache expires<br>C. Until the retention_time is met<br>D. Until the expiration_time is exceeded                                                                                 
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>D</strong>                                                                                                                                                                                                     
                                                                                                                                                                                                                       
The correct answer is D. Until the expiration_time is exceeded. Pre-signed URLs in Snowflake,                                                                                                                          
generated for accessing data files stored in cloud storage locations, are inherently time-limited.                                                                                                                     
This security mechanism ensures that access to the data is granted only for a specific period. The                                                                                                                     
expiration_time parameter, which is explicitly set when generating the pre-signed URL, defines                                                                                                                         
this time window. Once the specified time is reached, the URL becomes invalid, and further access                                                                                                                      
attempts will be denied, regardless of whether the data still exists or is still relevant. The other                                                                                                                   
options are incorrect because pre-signed URLs don't have indefinite access; they aren't connected                                                                                                                      
to the Snowflake result cache lifespan; and they don’t interact with Snowflake's data retention                                                                                                                        
policy. The expiration time limits the exposure window of your data, enforcing a least-privilege                                                                                                                       
access principle and preventing potential misuse from compromised URLs. Using expiration times                                                                                                                         
is a core practice in cloud computing for managing security effectively. This approach                                                                                                                                 
complements other access control measures used by Snowflake, securing both data at rest and in                                                                                                                         
transit. This temporal limitation prevents unauthorized access long after the authorized user                                                                                                                          
needed the file.https://docs.snowflake.com/en/sqlreference/functions/get_presigned_urlhttps://docs.snowflake.com/en/user-guide/data-loadexternal-tables-presigned-url                                                  
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
---                                                                                                                                                                                                                    
When unloading data from Snowflake to AWS, what permissions are required? (Choose two.)                                                                                                                                
                                                                                                                                                                                                                       
A. s3:DeleteObject<br>B. s3:CopyObject<br>C. s3:GetBucketAcl<br>D. s3:PutObject<br>E. s3:GetBucketLocation                                                                                                             
                                                                                                                                                                                                                       
<details>                                                                                                                                                                                                              
<summary><strong>✅ Answer : </strong></summary>                                                                                                                                                                       
<strong>A, D</strong>                                                                                                                                                                                                  
                                                                                                                                                                                                                       
The correct permissions for unloading data from Snowflake to AWS S3 are s3:PutObject and                                                                                                                               
s3:GetBucketLocation. Snowflake needs s3:PutObject permission to write the unloaded data as                                                                                                                            
new objects within the specified S3 bucket. This action involves creating new files containing the                                                                                                                     
data extracted from Snowflake. It's the fundamental operation for data export to S3. Snowflake                                                                                                                         
does not require permission to modify existing objects in S3 during an unload operation, hence                                                                                                                         
s3:CopyObject and s3:DeleteObject are not required.                                                                                                                                                                    
Additionally, Snowflake requires s3:GetBucketLocation permission to determine the region where                                                                                                                         
the S3 bucket is located. This information is essential for Snowflake to interact with the S3                                                                                                                          
service effectively. Without knowing the bucket's region, Snowflake cannot establish a proper                                                                                                                          
connection and transfer data. s3:GetBucketAcl is not a necessary permission for the basic unload                                                                                                                       
process. Access control lists (ACLs) are often managed via IAM policies and do not need to be                                                                                                                          
explicitly read by Snowflake during the unload process. Therefore, the minimal required set of                                                                                                                         
permissions for data unloading from Snowflake to S3 are s3:PutObject and s3:GetBucketLocation.                                                                                                                         
Snowflake documentation on S3 integration explicitly lists these permissions as essential for                                                                                                                          
setting up an integration with AWS S3 for both data loading and unloading. The documentation                                                                                                                           
clarifies that PutObject is needed for data writes and GetBucketLocation is required for region                                                                                                                        
retrieval.                                                                                                                                                                                                             
AWS S3 documentation on permissions provides an overview of different S3 permissions and                                                                                                                               
clarifies what operations they grant access to.                                                                                                                                                                        
</details>                                                                                                                                                                                                             
                                                                                                                                                                                                                       
                                                                                                                                                                                                                       
